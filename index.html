<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHIDER - Social Community Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-dark: #000000;
            --secondary-dark: #15202b;
            --accent-blue: #1d9bf0;
            --accent-green: #00ba7c;
            --text-primary: #ffffff;
            --text-secondary: #8b98a5;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--primary-dark);
            color: var(--text-primary);
            overflow-x: hidden;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body.light-mode {
            --primary-dark: #ffffff;
            --secondary-dark: #f7f9fa;
            --text-primary: #000000;
            --text-secondary: #536471;
            background-color: var(--primary-dark);
            color: var(--text-primary);
        }
        
        .twitter-card {
            border-bottom: 1px solid #2f3336;
            transition: background-color 0.2s;
            position: relative;
        }
        
        .light-mode .twitter-card {
            border-bottom: 1px solid #eff3f4;
        }
        
        .twitter-card:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }
        
        .light-mode .twitter-card:hover {
            background-color: rgba(0, 0, 0, 0.03);
        }
        
        .btn-primary {
            background-color: var(--accent-blue);
            color: white;
            font-weight: 600;
            border-radius: 9999px;
            padding: 0.5rem 1rem;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-primary:hover {
            background-color: #1a8cd8;
            transform: translateY(-1px);
        }
        
        .btn-primary:disabled {
            background-color: #1d4f7c;
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-secondary {
            background-color: transparent;
            color: var(--accent-blue);
            border: 1px solid var(--accent-blue);
            font-weight: 600;
            border-radius: 9999px;
            padding: 0.5rem 1rem;
            transition: all 0.2s;
            cursor: pointer;
        }
        
        .btn-secondary:hover {
            background-color: rgba(29, 155, 240, 0.1);
            transform: translateY(-1px);
        }
        
        .btn-success {
            background-color: var(--accent-green);
            color: white;
            font-weight: 600;
            border-radius: 9999px;
            padding: 0.5rem 1rem;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }
        
        .btn-success:hover {
            background-color: #00a56e;
            transform: translateY(-1px);
        }
        
        .action-btn {
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            transition: all 0.2s;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 9999px;
        }
        
        .action-btn:hover {
            background-color: rgba(29, 155, 240, 0.1);
            transform: scale(1.05);
        }
        
        .like-btn:hover {
            color: #f91880;
        }
        
        .repost-btn:hover {
            color: #00ba7c;
        }
        
        .active-like {
            color: #f91880;
        }
        
        .active-repost {
            color: #00ba7c;
        }
        
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 1rem;
            backdrop-filter: blur(5px);
        }
        
        .light-mode .modal-overlay {
            background-color: rgba(0, 0, 0, 0.4);
        }
        
        .modal-content {
            background-color: var(--secondary-dark);
            border-radius: 1rem;
            padding: 1.5rem;
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
            border: 1px solid #2f3336;
        }
        
        .light-mode .modal-content {
            border: 1px solid #cfd9de;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .avatar {
            border-radius: 50%;
            object-fit: cover;
        }
        
        .media-preview {
            border-radius: 1rem;
            overflow: hidden;
            margin-top: 1rem;
            position: relative;
        }
        
        .media-preview img, .media-preview video {
            width: 100%;
            max-height: 300px;
            object-fit: cover;
        }
        
        .remove-media {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .remove-media:hover {
            background: rgba(0, 0, 0, 0.9);
            transform: scale(1.1);
        }
        
        .close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1.5rem;
            transition: all 0.2s;
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .close-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
        }
        
        .light-mode .close-btn:hover {
            background-color: rgba(0, 0, 0, 0.05);
            color: black;
        }
        
        .comment-section {
            margin-top: 1rem;
            border-top: 1px solid #2f3336;
            padding-top: 1rem;
        }
        
        .light-mode .comment-section {
            border-top: 1px solid #cfd9de;
        }
        
        .comment {
            padding: 0.75rem 0;
            border-bottom: 1px solid #2f3336;
        }
        
        .light-mode .comment {
            border-bottom: 1px solid #cfd9de;
        }
        
        .comment:last-child {
            border-bottom: none;
        }
        
        .login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            padding: 2rem;
            background: linear-gradient(135deg, #000000 0%, #15202b 100%);
        }
        
        .light-mode .login-container {
            background: linear-gradient(135deg, #ffffff 0%, #f7f9fa 100%);
        }
        
        .login-box {
            background-color: var(--secondary-dark);
            border-radius: 1.5rem;
            padding: 2.5rem;
            width: 100%;
            max-width: 450px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.5);
            border: 1px solid #2f3336;
            position: relative;
            overflow: hidden;
        }
        
        .light-mode .login-box {
            border: 1px solid #cfd9de;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .login-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #1d9bf0, #00ba7c);
        }
        
        .profile-header {
            background-color: var(--secondary-dark);
            border-bottom: 1px solid #2f3336;
            padding: 1.5rem;
        }
        
        .light-mode .profile-header {
            border-bottom: 1px solid #cfd9de;
        }
        
        .wallet-card {
            background: linear-gradient(135deg, #1d9bf0, #00ba7c);
            border-radius: 1rem;
            padding: 1.5rem;
            color: white;
            margin-bottom: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }
        
        .stat-item {
            text-align: center;
            padding: 0.5rem;
            border-radius: 0.5rem;
            background: rgba(255, 255, 255, 0.05);
        }
        
        .light-mode .stat-item {
            background: rgba(0, 0, 0, 0.05);
        }
        
        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }
        
        .search-results {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--secondary-dark);
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            border: 1px solid #2f3336;
            max-height: 300px;
            overflow-y: auto;
            z-index: 100;
        }
        
        .light-mode .search-results {
            border: 1px solid #cfd9de;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .search-result-item {
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #2f3336;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .light-mode .search-result-item {
            border-bottom: 1px solid #cfd9de;
        }
        
        .search-result-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .light-mode .search-result-item:hover {
            background-color: rgba(0, 0, 0, 0.05);
        }
        
        .search-result-item:last-child {
            border-bottom: none;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #1d9bf0, #00ba7c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .notification {
            position: fixed;
            top: 1rem;
            right: 1rem;
            padding: 1rem 1.5rem;
            border-radius: 0.5rem;
            background: var(--secondary-dark);
            border: 1px solid #2f3336;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transform: translateX(150%);
            transition: transform 0.3s ease;
        }
        
        .light-mode .notification {
            border: 1px solid #cfd9de;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            border-left: 4px solid #00ba7c;
        }
        
        .notification.error {
            border-left: 4px solid #f91880;
        }
        
        .notification.info {
            border-left: 4px solid #1d9bf0;
        }
        
        .skeleton {
            background: linear-gradient(90deg, #2f3336 25%, #3a3f44 50%, #2f3336 75%);
            background-size: 200% 100%;
            animation: loading 1.5s infinite;
            border-radius: 0.25rem;
        }
        
        .light-mode .skeleton {
            background: linear-gradient(90deg, #e1e8ed 25%, #f7f9fa 50%, #e1e8ed 75%);
        }
        
        @keyframes loading {
            0% {
                background-position: 200% 0;
            }
            100% {
                background-position: -200% 0;
            }
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #2f3336;
        }
        
        .light-mode ::-webkit-scrollbar-track {
            background: #e1e8ed;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #1d9bf0;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #1a8cd8;
        }
        
        .delete-post-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            width: 2rem;
            height: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            transition: all 0.2s;
            opacity: 0;
        }
        
        .twitter-card:hover .delete-post-btn {
            opacity: 1;
        }
        
        .delete-post-btn:hover {
            background: rgba(220, 38, 38, 0.8);
            transform: scale(1.1);
        }
        
        .follow-btn {
            background-color: var(--accent-blue);
            color: white;
            border: none;
            border-radius: 9999px;
            padding: 0.5rem 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .follow-btn:hover {
            background-color: #1a8cd8;
        }
        
        .unfollow-btn {
            background-color: transparent;
            color: var(--text-primary);
            border: 1px solid #536471;
            border-radius: 9999px;
            padding: 0.5rem 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .unfollow-btn:hover {
            background-color: rgba(244, 33, 46, 0.1);
            border-color: #f4212e;
            color: #f4212e;
        }
        
        .profile-avatar-edit {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }
        
        .profile-avatar-edit:hover::after {
            content: 'Change Photo';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
            cursor: pointer;
        }

        /* Improved login screen styling */
        .login-header {
            text-align: center;
            margin-bottom: 2rem;
        }

        .login-logo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1d9bf0, #00ba7c);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            color: white;
            font-size: 2rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        }

        .form-group {
            margin-bottom: 1.5rem;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .form-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #2f3336;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.2s;
        }

        .light-mode .form-input {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid #cfd9de;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 2px rgba(29, 155, 240, 0.2);
        }

        .password-toggle {
            position: absolute;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
        }

        .password-note {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 0.5rem;
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 0.5rem;
            border-radius: 0.25rem;
        }

        .light-mode .password-note {
            background: rgba(0, 0, 0, 0.05);
        }

        .login-footer {
            text-align: center;
            margin-top: 2rem;
            color: var(--text-secondary);
        }

        .login-footer a {
            color: var(--accent-blue);
            text-decoration: none;
            transition: color 0.2s;
        }

        .login-footer a:hover {
            color: #1a8cd8;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 1.5rem 0;
            color: var(--text-secondary);
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #2f3336;
        }

        .light-mode .divider::before,
        .light-mode .divider::after {
            background: #cfd9de;
        }

        .divider-text {
            padding: 0 1rem;
            font-size: 0.875rem;
        }
        
        /* Logout Modal */
        .logout-modal-content {
            text-align: center;
        }
        
        .logout-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(244, 33, 46, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1.5rem;
            color: #f4212e;
            font-size: 2rem;
        }
        
        .logout-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .logout-actions .btn-secondary {
            flex: 1;
        }
        
        .logout-actions .btn-danger {
            flex: 1;
            background-color: #f4212e;
            color: white;
            border: none;
            border-radius: 9999px;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .logout-actions .btn-danger:hover {
            background-color: #d11a2a;
        }
        
        /* Animasi baru untuk profesionalitas */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(29, 155, 240, 0.5); }
            50% { box-shadow: 0 0 20px rgba(29, 155, 240, 0.8); }
        }
        
        @keyframes slideInFromLeft {
            0% { transform: translateX(-100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes slideInFromRight {
            0% { transform: translateX(100%); opacity: 0; }
            100% { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes scaleIn {
            0% { transform: scale(0.9); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .float-animation {
            animation: float 3s ease-in-out infinite;
        }
        
        .glow-animation {
            animation: glow 2s ease-in-out infinite;
        }
        
        .slide-in-left {
            animation: slideInFromLeft 0.5s ease-out;
        }
        
        .slide-in-right {
            animation: slideInFromRight 0.5s ease-out;
        }
        
        .scale-in {
            animation: scaleIn 0.3s ease-out;
        }
        
        /* Styling untuk halaman baru */
        .airdrop-card {
            background: linear-gradient(135deg, #1d9bf0, #00ba7c);
            border-radius: 1rem;
            padding: 1.5rem;
            color: white;
            margin-bottom: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .airdrop-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
            transform: rotate(30deg);
        }
        
        .token-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .token-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            padding: 1rem;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .token-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .token-logo {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin: 0 auto 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: rgba(255, 255, 255, 0.2);
        }
        
        .chart-container {
            height: 300px;
            margin-top: 1rem;
            border-radius: 0.75rem;
            overflow: hidden;
        }
        
        .ai-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 1rem;
            padding: 1.5rem;
            color: white;
            margin-bottom: 1rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .feature-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #1d9bf0;
        }
        
        /* Styling untuk Web3 wallet connection */
        .wallet-connection {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
        }
        
        .wallet-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
            width: 100%;
            max-width: 500px;
        }
        
        .wallet-option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .wallet-option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }
        
        .wallet-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        .connected-wallet {
            background: rgba(29, 155, 240, 0.2);
            border: 1px solid rgba(29, 155, 240, 0.5);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .wallet-address {
            font-family: monospace;
            background: rgba(0, 0, 0, 0.3);
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-size: 0.875rem;
        }
        
        /* Styling untuk halaman Airdrop */
        .airdrop-progress {
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .airdrop-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #1d9bf0, #00ba7c);
            border-radius: 5px;
            transition: width 1s ease-in-out;
        }
        
        .airdrop-tasks {
            margin-top: 1.5rem;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .task-item:last-child {
            border-bottom: none;
        }
        
        .task-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .task-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(29, 155, 240, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1d9bf0;
        }
        
        /* Tambahan styling untuk animasi dan profesionalitas */
        .twitter-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(29, 155, 240, 0.4);
        }
        
        /* Fix untuk top menu */
        .top-menu {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            background-color: var(--secondary-dark);
            border-bottom: 1px solid #2f3336;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .top-menu-left {
            display: flex;
            overflow-x: auto;
        }
        
        .top-menu-right {
            position: relative;
        }
        
        .top-menu-item {
            padding: 0.5rem 1rem;
            margin-right: 0.5rem;
            border-radius: 9999px;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }
        
        .top-menu-item:hover, .top-menu-item.active {
            background-color: rgba(29, 155, 240, 0.1);
            color: var(--accent-blue);
        }
        
        /* Fix untuk bottom menu */
        .bottom-menu {
            display: flex;
            justify-content: space-around;
            padding: 0.75rem;
            background-color: var(--secondary-dark);
            border-top: 1px solid #2f3336;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 100;
        }
        
        .bottom-menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem;
            cursor: pointer;
            transition: all 0.2s;
            border-radius: 0.5rem;
            min-width: 60px;
        }
        
        .bottom-menu-item:hover, .bottom-menu-item.active {
            color: var(--accent-blue);
            background-color: rgba(29, 155, 240, 0.1);
        }
        
        .bottom-menu-icon {
            font-size: 1.25rem;
            margin-bottom: 0.25rem;
        }
        
        /* Fix untuk tampilan halaman wallet */
        .wallet-connection-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
            min-height: 50vh;
        }
        
        .wallet-connection-section h3 {
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .wallet-connection-section p {
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }
        
        .wallet-connected-section {
            padding: 1rem;
        }
        
        /* Fix untuk tampilan halaman AI */
        .ai-page-content {
            padding: 1rem;
        }
        
        /* Fix untuk tampilan halaman profile */
        .profile-page-content {
            padding-bottom: 4rem;
        }
        
        /* Fix untuk tampilan halaman explore */
        .explore-page-content {
            padding: 1rem;
        }
        
        /* Fix untuk tampilan halaman communities */
        .communities-page-content {
            padding: 1rem;
            padding-bottom: 4rem;
        }
        
        /* Fix untuk tampilan halaman messages */
        .messages-page-content {
            padding: 1rem;
            padding-bottom: 4rem;
        }
        
        /* Fix untuk tampilan halaman help */
        .help-page-content {
            padding: 1rem;
        }
        
        /* Fix untuk tampilan halaman search */
        .search-page-content {
            padding: 1rem;
        }
        
        /* Fix untuk community cards */
        .community-card {
            background-color: var(--secondary-dark);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border: 1px solid #2f3336;
        }
        
        .community-header {
            display: flex;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .community-logo {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1d9bf0, #00ba7c);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            color: white;
            font-size: 1.5rem;
        }
        
        .community-info {
            flex: 1;
        }
        
        .community-name {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 0.25rem;
        }
        
        .community-bio {
            color: var(--text-secondary);
            margin-bottom: 0.5rem;
        }
        
        .community-members {
            display: flex;
            align-items: center;
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        .community-actions {
            display: flex;
            justify-content: flex-end;
        }
        
        /* Fix untuk message items */
        .message-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #2f3336;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .message-item:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }
        
        .message-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1d9bf0, #00ba7c);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            color: white;
            font-weight: bold;
            flex-shrink: 0;
        }
        
        .message-content {
            flex: 1;
        }
        
        .message-user {
            font-weight: bold;
            margin-bottom: 0.25rem;
        }
        
        .message-preview {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        .message-time {
            color: var(--text-secondary);
            font-size: 0.75rem;
        }
        
        /* Fix untuk user result items */
        .user-result-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid #2f3336;
        }
        
        .user-result-info {
            display: flex;
            align-items: center;
        }
        
        .user-result-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1d9bf0, #00ba7c);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            color: white;
            font-weight: bold;
        }
        
        .user-result-name {
            font-weight: bold;
            margin-bottom: 0.25rem;
        }
        
        .user-result-username {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        /* Fix untuk setting items */
        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            border-bottom: 1px solid #2f3336;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .setting-item:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }
        
        .theme-toggle {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }
        
        .theme-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .theme-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        
        .theme-slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .theme-slider {
            background-color: var(--accent-blue);
        }
        
        input:checked + .theme-slider:before {
            transform: translateX(26px);
        }
        
        /* Fix untuk language options */
        .language-option {
            padding: 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s;
            border-bottom: 1px solid #2f3336;
        }
        
        .language-option:last-child {
            border-bottom: none;
        }
        
        .language-option:hover, .language-option.active {
            background-color: rgba(255, 255, 255, 0.03);
        }
        
        /* Fix untuk help items */
        .help-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-bottom: 0.5rem;
        }
        
        .help-item:hover {
            background-color: rgba(255, 255, 255, 0.03);
        }
        
        .help-item i {
            font-size: 1.5rem;
            margin-right: 1rem;
            width: 30px;
        }
        
        /* Fix untuk more options menu */
        .more-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--secondary-dark);
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            border: 1px solid #2f3336;
            z-index: 10;
            min-width: 180px;
            display: none;
        }
        
        .more-menu.show {
            display: block;
        }
        
        .more-menu-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .more-menu-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .more-menu-item i {
            margin-right: 0.5rem;
            width: 20px;
        }
        
        /* Fix untuk share options menu */
        .share-options-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--secondary-dark);
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            border: 1px solid #2f3336;
            z-index: 10;
            min-width: 180px;
        }
        
        .share-options-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .share-options-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .share-options-item i {
            margin-right: 0.5rem;
            width: 20px;
        }
        
        /* Fix untuk chat containers */
        .community-chat-container, .direct-chat-container {
            height: 70vh;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages, .direct-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }
        
        .chat-input-container, .direct-chat-input-container {
            display: flex;
            padding: 1rem;
            border-top: 1px solid #2f3336;
        }
        
        .chat-input, .direct-chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #2f3336;
            border-radius: 9999px;
            padding: 0.75rem 1rem;
            color: var(--text-primary);
            margin-right: 0.5rem;
        }
        
        .chat-media-btn, .chat-send-btn, .direct-chat-send-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.2s;
        }
        
        .chat-media-btn:hover, .chat-send-btn:hover, .direct-chat-send-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }
        
        .chat-message, .direct-chat-message {
            margin-bottom: 1rem;
            max-width: 80%;
        }
        
        .chat-message.sent, .direct-chat-message.sent {
            margin-left: auto;
            text-align: right;
        }
        
        .chat-message.received, .direct-chat-message.received {
            margin-right: auto;
        }
        
        .chat-message-content, .direct-chat-message-content {
            background: rgba(29, 155, 240, 0.1);
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            display: inline-block;
            word-break: break-word;
        }
        
        .chat-message.sent .chat-message-content, .direct-chat-message.sent .direct-chat-message-content {
            background: rgba(29, 155, 240, 0.2);
        }
        
        .chat-message-sender {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 0.25rem;
        }
        
        .chat-message-time, .direct-chat-message-time {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 0.25rem;
        }
        
        .chat-media-preview {
            margin-top: 0.5rem;
        }
        
        .chat-media-item {
            position: relative;
            display: inline-block;
            margin-right: 0.5rem;
            margin-bottom: 0.5rem;
        }
        
        .chat-media-item img, .chat-media-item video {
            max-height: 100px;
            border-radius: 0.5rem;
        }
        
        .chat-remove-media {
            position: absolute;
            top: 0.25rem;
            right: 0.25rem;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: white;
            font-size: 0.75rem;
        }
        
        /* Fix untuk member list */
        .member-list {
            margin-top: 1rem;
        }
        
        .member-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid #2f3336;
        }
        
        .member-item:last-child {
            border-bottom: none;
        }
        
        .member-info {
            display: flex;
            align-items: center;
        }
        
        .member-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #1d9bf0, #00ba7c);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            color: white;
            font-size: 0.875rem;
            font-weight: bold;
        }
        
        .member-name {
            font-weight: bold;
        }
        
        .member-username {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        .member-role {
            background: rgba(29, 155, 240, 0.2);
            color: var(--accent-blue);
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.75rem;
        }
        
        /* Fix untuk public communities section */
        .public-communities-section {
            margin-top: 2rem;
        }
        
        .section-title {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        /* Fix untuk auto-link */
        .auto-link {
            color: var(--accent-blue);
            text-decoration: none;
        }
        
        .auto-link:hover {
            text-decoration: underline;
        }
        
        /* New styles for improved menu */
        .more-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--secondary-dark);
            border-radius: 0.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.5);
            border: 1px solid #2f3336;
            z-index: 10;
            min-width: 180px;
            display: none;
        }
        
        .more-menu.show {
            display: block;
        }
        
        .more-menu-item {
            display: flex;
            align-items: center;
            padding: 0.75rem 1rem;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .more-menu-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .more-menu-item i {
            margin-right: 0.5rem;
            width: 20px;
        }
        
        /* Improved airdrop styling */
        .airdrop-task {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 0.75rem;
            padding: 1rem;
            margin-bottom: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .airdrop-task-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .airdrop-task-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(29, 155, 240, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: #1d9bf0;
        }
        
        .airdrop-task-details {
            flex: 1;
        }
        
        .airdrop-task-title {
            font-weight: bold;
            margin-bottom: 0.25rem;
        }
        
        .airdrop-task-reward {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }
        
        .airdrop-task-status {
            font-size: 0.75rem;
            color: var(--accent-green);
        }
        
        /* Improved wallet styling */
        .wallet-connection-section {
            padding: 2rem;
            text-align: center;
        }
        
        .wallet-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .wallet-option {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 0.75rem;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .wallet-option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-5px);
        }
        
        .wallet-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        
        /* Referral page styling */
        .referral-page-content {
            padding: 1rem;
            padding-bottom: 4rem;
        }
        
        .settings-page-content {
            padding: 1rem;
            padding-bottom: 4rem;
        }

        /* Fix untuk search input */
        .search-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid #2f3336;
            border-radius: 9999px;
            padding: 0.75rem 1rem 0.75rem 2.5rem;
            color: var(--text-primary);
            font-size: 1rem;
            transition: all 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 2px rgba(29, 155, 240, 0.2);
        }

        .search-container {
            position: relative;
            padding: 1rem;
        }

        .search-icon {
            position: absolute;
            left: 1.75rem;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
        }

        /* Fix untuk tampilan profile */
        .profile-edit-btn {
            width: 100%;
            margin-top: 1rem;
        }

        /* Fix untuk tampilan home */
        .home-page-content {
            padding-bottom: 4rem;
        }
        
        /* Styling untuk centang verified */
        .verified-badge {
            color: #1d9bf0;
            margin-left: 2px;
            font-size: 0.8rem;
        }
        
        /* Styling untuk tombol Send Message di hasil pencarian */
        .search-actions {
            display: flex;
            gap: 0.5rem;
        }

        /* Styling untuk tombol Send Message di profil */
        .profile-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 1rem;
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Notification System -->
    <div id="notification" class="notification hidden">
        <i id="notification-icon" class="fas fa-info-circle"></i>
        <span id="notification-message">Notification message</span>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="login-container">
        <div class="login-box scale-in">
            <div class="login-header">
                <div class="login-logo float-animation">
                    <i class="fas fa-users"></i>
                </div>
                <h1 class="text-3xl font-bold gradient-text">WHIDER</h1>
                <p class="text-gray-400 mt-2">Social Community Platform</p>
            </div>
            
            <form id="login-form" class="space-y-4">
                <div class="form-group">
                    <label class="form-label" for="login-email">Email</label>
                    <input 
                        type="email" 
                        id="login-email"
                        class="form-input"
                        required
                        placeholder="email@example.com"
                    >
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="login-password">Password</label>
                    <input 
                        type="password" 
                        id="login-password"
                        class="form-input"
                        required
                        placeholder="Enter your password"
                    >
                    <button type="button" class="password-toggle" id="login-password-toggle">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                
                <button type="submit" class="btn-primary w-full py-3 glow-animation">
                    <i class="fas fa-sign-in-alt mr-2"></i> Sign In
                </button>
            </form>

            <div class="divider">
                <span class="divider-text">or</span>
            </div>
            
            <div class="text-center">
                <button id="wallet-login-btn" class="btn-secondary w-full py-3">
                    <i class="fas fa-wallet mr-2"></i> Connect Web3 Wallet
                </button>
            </div>
            
            <div class="login-footer">
                <span>Don't have an account? </span>
                <a href="#" id="switch-to-register">Create Account</a>
            </div>
        </div>
    </div>

    <!-- Register Screen -->
    <div id="register-screen" class="login-container hidden">
        <div class="login-box scale-in">
            <div class="login-header">
                <div class="login-logo">
                    <i class="fas fa-users"></i>
                </div>
                <h1 class="text-3xl font-bold gradient-text">Join WHIDER</h1>
                <p class="text-gray-400 mt-2">Connect with your community</p>
            </div>
            
            <form id="register-form" class="space-y-4">
                <div class="form-group">
                    <label class="form-label" for="register-name">Full Name</label>
                    <input 
                        type="text" 
                        id="register-name"
                        class="form-input"
                        required
                        placeholder="Your full name"
                    >
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="register-username">Username</label>
                    <input 
                        type="text" 
                        id="register-username"
                        class="form-input"
                        required
                        placeholder="username"
                    >
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="register-email">Email</label>
                    <input 
                        type="email" 
                        id="register-email"
                        class="form-input"
                        required
                        placeholder="email@example.com"
                    >
                </div>
                
                <!-- Tambahkan input kode referral -->
                <div class="form-group">
                    <label class="form-label" for="register-referral">Referral Code (Optional)</label>
                    <input 
                        type="text" 
                        id="register-referral"
                        class="form-input"
                        placeholder="Enter referral code"
                    >
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="register-password">Password</label>
                    <input 
                        type="password" 
                        id="register-password"
                        class="form-input"
                        required
                        placeholder="Minimum 8 characters"
                        minlength="8"
                    >
                    <button type="button" class="password-toggle" id="register-password-toggle">
                        <i class="fas fa-eye"></i>
                    </button>
                    <div class="password-note">
                        Please screenshot this data to avoid forgetting it
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="register-confirm-password">Confirm Password</label>
                    <input 
                        type="password" 
                        id="register-confirm-password"
                        class="form-input"
                        required
                        placeholder="Repeat password"
                    >
                    <button type="button" class="password-toggle" id="register-confirm-password-toggle">
                        <i class="fas fa-eye"></i>
                    </button>
                </div>
                
                <button type="submit" class="btn-primary w-full py-3 glow-animation" id="register-submit">
                    <i class="fas fa-user-plus mr-2"></i> Create Account
                </button>
            </form>
            
            <div class="login-footer">
                <span>Already have an account? </span>
                <a href="#" id="switch-to-login">Sign In</a>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="min-h-screen flex flex-col hidden">
        <!-- Top Menu - Diperbarui sesuai instruksi -->
        <div class="top-menu">
            <div class="top-menu-left">
                <div class="top-menu-item active" data-page="profile">Profile</div>
                <div class="top-menu-item" data-page="communities">Community</div>
                <div class="top-menu-item" data-page="messages">Message</div>
                <div class="top-menu-item" data-page="settings">Setting</div>
            </div>
            <div class="top-menu-right">
                <div class="top-menu-item" id="more-menu-btn">
                    <i class="fas fa-ellipsis-h"></i>
                </div>
                <div id="more-menu" class="more-menu">
                    <div class="more-menu-item" data-page="airdrop">
                        <i class="fas fa-gift"></i> Airdrop
                    </div>
                    <div class="more-menu-item" data-page="referral">
                        <i class="fas fa-share-alt"></i> Referral
                    </div>
                    <div class="more-menu-item" data-page="help">
                        <i class="fas fa-question-circle"></i> Help
                    </div>
                    <div class="more-menu-item" id="language-btn">
                        <i class="fas fa-globe"></i> Language
                    </div>
                    <div class="more-menu-item" data-page="explore">
                        <i class="fas fa-compass"></i> Explore
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="flex-1 overflow-y-auto pb-16">
            <!-- Home Page Content -->
            <div id="home-page" class="home-page-content">
                <!-- Compose Post -->
                <div class="p-4 border-b border-gray-800 slide-in-left">
                    <div class="flex space-x-4">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex-shrink-0 flex items-center justify-center text-white font-bold" id="user-avatar">
                            U
                        </div>
                        <div class="flex-1">
                            <textarea 
                                id="tweet-input"
                                placeholder="What's happening in your community?"
                                class="w-full bg-transparent text-xl placeholder-gray-500 resize-none outline-none"
                                rows="3"
                            ></textarea>
                            
                            <div class="flex justify-between items-center mt-4">
                                <div class="flex space-x-2">
                                    <!-- Image Upload -->
                                    <input type="file" id="image-upload" accept="image/*" class="hidden" multiple>
                                    <button id="image-btn" class="action-btn">
                                        <i class="fas fa-image"></i>
                                    </button>
                                    
                                    <!-- Video Upload -->
                                    <input type="file" id="video-upload" accept="video/*" class="hidden">
                                    <button id="video-btn" class="action-btn">
                                        <i class="fas fa-video"></i>
                                    </button>
                                    
                                    <!-- GIF Button -->
                                    <button class="action-btn">
                                        <i class="fas fa-film"></i>
                                    </button>
                                    
                                    <!-- Emoji Button -->
                                    <button class="action-btn">
                                        <i class="far fa-smile"></i>
                                    </button>
                                </div>
                                
                                <button id="tweet-btn" class="btn-primary px-4 py-2 opacity-50" disabled>
                                    <i class="fas fa-feather-alt mr-2"></i> Post
                                </button>
                            </div>
                            
                            <!-- Media Preview -->
                            <div id="media-preview" class="mt-2 hidden"></div>
                        </div>
                    </div>
                </div>
                
                <!-- Feed -->
                <div id="feed">
                    <!-- Posts will be dynamically added here -->
                    <div id="empty-feed" class="p-8 text-center text-gray-500">
                        <i class="fas fa-feather text-4xl mb-4 opacity-50"></i>
                        <p>No posts yet. Be the first to post!</p>
                    </div>
                </div>
            </div>
            
            <!-- Airdrop Page Content -->
            <div id="airdrop-page" class="hidden airdrop-page-content">
                <div class="text-center py-4">
                    <h2 class="text-2xl font-bold mb-2">WHIDER Airdrop</h2>
                    <p class="text-gray-400 mb-6">Complete tasks to earn WHIDER tokens</p>
                </div>
                
                <div class="airdrop-card scale-in">
                    <h3 class="text-xl font-bold mb-2">Your Airdrop Progress</h3>
                    <div class="flex justify-between mb-2">
                        <span>Total WHIDER Earned:</span>
                        <span class="font-bold" id="total-airdrop-earned">0 WHIDER</span>
                    </div>
                    <div class="airdrop-progress">
                        <div class="airdrop-progress-bar" id="airdrop-progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="flex justify-between text-sm">
                        <span>0 WHIDER</span>
                        <span id="max-airdrop-reward">100 WHIDER</span>
                    </div>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-4">
                    <h3 class="text-lg font-bold mb-4">Airdrop Tasks</h3>
                    <div class="airdrop-tasks" id="airdrop-tasks">
                        <!-- Tasks will be dynamically added here -->
                    </div>
                </div>
            </div>
            
            <!-- Wallet Page Content - Diperbarui dengan redirect ke website eksternal -->
            <div id="wallet-page" class="hidden wallet-page-content">
                <div class="text-center py-8">
                    <div class="w-24 h-24 rounded-full bg-gray-800 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-wallet text-3xl"></i>
                    </div>
                    <h2 class="text-2xl font-bold mb-2">Web3 Wallet</h2>
                    <p class="text-gray-400 mb-6">Redirecting to WHIDER Wallet...</p>
                    
                    <button id="redirect-wallet-btn" class="btn-primary">
                        <i class="fas fa-external-link-alt mr-2"></i> Go to WHIDER Wallet
                    </button>
                </div>
            </div>
            
            <!-- AI Page Content -->
            <div id="ai-page" class="hidden ai-page-content">
                <div class="text-center py-4">
                    <h2 class="text-2xl font-bold mb-2">WHIDER AI</h2>
                    <p class="text-gray-400 mb-6">Advanced AI features for the WHIDER platform</p>
                </div>
                
                <div class="ai-card scale-in">
                    <h3 class="text-xl font-bold mb-2">AI-Powered Features</h3>
                    <p class="mb-4">Experience the future of social networking with our AI integration</p>
                    <a href="https://your-ai-platform.com" target="_blank" class="btn-primary inline-block">
                        <i class="fas fa-external-link-alt mr-2"></i> Visit AI Platform
                    </a>
                </div>
                
                <div class="mt-6">
                    <h3 class="text-lg font-bold mb-4">AI Features</h3>
                    <div class="feature-grid">
                        <div class="feature-card scale-in">
                            <div class="feature-icon">
                                <i class="fas fa-robot"></i>
                            </div>
                            <div class="font-bold">AI Assistant</div>
                            <div class="text-sm text-gray-300 mt-2">Get help with your posts and content creation</div>
                        </div>
                        
                        <div class="feature-card scale-in">
                            <div class="feature-icon">
                                <i class="fas fa-chart-line"></i>
                            </div>
                            <div class="font-bold">Content Analytics</div>
                            <div class="text-sm text-gray-300 mt-2">AI-powered insights into your content performance</div>
                        </div>
                        
                        <div class="feature-card scale-in">
                            <div class="feature-icon">
                                <i class="fas fa-users"></i>
                            </div>
                            <div class="font-bold">Community Insights</div>
                            <div class="text-sm text-gray-300 mt-2">Understand your community better with AI analysis</div>
                        </div>
                        
                        <div class="feature-card scale-in">
                            <div class="feature-icon">
                                <i class="fas fa-magic"></i>
                            </div>
                            <div class="font-bold">Content Generation</div>
                            <div class="text-sm text-gray-300 mt-2">Generate engaging content with AI assistance</div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-6 bg-gray-800 rounded-xl p-4">
                    <h3 class="text-lg font-bold mb-4">Upcoming AI Features</h3>
                    <ul class="list-disc list-inside space-y-2">
                        <li>AI-powered content moderation</li>
                        <li>Personalized content recommendations</li>
                        <li>Smart community matching</li>
                        <li>AI-generated community insights</li>
                        <li>Voice-controlled interface</li>
                    </ul>
                </div>
            </div>
            
            <!-- Profile Page Content -->
            <div id="profile-page" class="hidden profile-page-content">
                <!-- Profile Header -->
                <div class="profile-header">
                    <div class="flex justify-between items-start">
                        <div class="flex-1">
                            <div class="flex items-center space-x-4 mb-4">
                                <div class="profile-avatar-edit">
                                    <div class="w-20 h-20 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center text-white text-2xl font-bold" id="profile-avatar">
                                        U
                                    </div>
                                    <input type="file" id="avatar-upload" accept="image/*" class="hidden">
                                </div>
                                <div class="flex-1">
                                    <h2 class="text-2xl font-bold" id="profile-name">User Name</h2>
                                    <div class="flex items-center">
                                        <p class="text-gray-400" id="profile-username">@username</p>
                                        <span id="verified-badge" class="verified-badge hidden">
                                            <i class="fas fa-check-circle"></i>
                                        </span>
                                    </div>
                                    <p class="text-gray-300 mt-2" id="profile-bio">User bio will appear here</p>
                                    
                                    <!-- Profile Actions -->
                                    <div class="profile-actions">
                                        <button id="follow-btn" class="follow-btn hidden">
                                            <i class="fas fa-user-plus mr-2"></i> Follow
                                        </button>
                                        <button id="unfollow-btn" class="unfollow-btn hidden">
                                            <i class="fas fa-user-check mr-2"></i> Following
                                        </button>
                                        <button id="send-message-btn" class="btn-secondary hidden">
                                            <i class="fas fa-envelope mr-2"></i> Send Message
                                        </button>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="stats-grid">
                                <div class="stat-item cursor-pointer" id="posts-count">
                                    <div class="stat-value" id="profile-posts-count">0</div>
                                    <div class="stat-label">Posts</div>
                                </div>
                                <div class="stat-item cursor-pointer" id="followers-count">
                                    <div class="stat-value" id="profile-followers">0</div>
                                    <div class="stat-label">Followers</div>
                                </div>
                                <div class="stat-item cursor-pointer" id="following-count">
                                    <div class="stat-value" id="profile-following">0</div>
                                    <div class="stat-label">Following</div>
                                </div>
                            </div>
                            
                            <button id="edit-profile-btn" class="btn-secondary w-full mt-4 profile-edit-btn">
                                <i class="fas fa-edit mr-2"></i> Edit Profile
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- User Posts -->
                <div id="user-posts-container">
                    <h3 class="text-xl font-bold p-4">Posts</h3>
                    <div id="user-posts">
                        <!-- User posts will be dynamically added here -->
                    </div>
                </div>
            </div>
            
            <!-- Explore Page Content -->
            <div id="explore-page" class="hidden explore-page-content">
                <div class="text-center py-8">
                    <div class="w-24 h-24 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-hashtag text-3xl text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold mb-2">Explore Communities</h2>
                    <p class="text-gray-400 mb-6">Discover new communities and connect with people</p>
                    
                    <div class="grid grid-cols-2 gap-4 mb-6">
                        <div class="bg-gray-800 rounded-xl p-4 text-center cursor-pointer explore-item hover:bg-gray-700 transition">
                            <i class="fas fa-laptop-code text-2xl mb-2 text-blue-400"></i>
                            <p class="font-bold">Technology</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center cursor-pointer explore-item hover:bg-gray-700 transition">
                            <i class="fas fa-music text-2xl mb-2 text-green-400"></i>
                            <p class="font-bold">Music</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center cursor-pointer explore-item hover:bg-gray-700 transition">
                            <i class="fas fa-paint-brush text-2xl mb-2 text-purple-400"></i>
                            <p class="font-bold">Art</p>
                        </div>
                        <div class="bg-gray-800 rounded-xl p-4 text-center cursor-pointer explore-item hover:bg-gray-700 transition">
                            <i class="fas fa-heartbeat text-2xl mb-2 text-red-400"></i>
                            <p class="font-bold">Health</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Communities Page Content -->
            <div id="communities-page" class="hidden communities-page-content">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-bold">Your Communities</h2>
                    <button id="create-community-btn" class="btn-primary">
                        <i class="fas fa-plus mr-2"></i> Create Community
                    </button>
                </div>
                
                <div id="communities-list">
                    <!-- Communities will be dynamically added here -->
                </div>
                
                <div id="no-communities" class="text-center py-8 text-gray-500">
                    <i class="fas fa-users text-4xl mb-4 opacity-50"></i>
                    <p>You haven't joined any communities yet.</p>
                    <button id="discover-communities-btn" class="btn-primary mt-4">
                        <i class="fas fa-search mr-2"></i> Discover Communities
                    </button>
                </div>
                
                <!-- Public Communities Section -->
                <div class="public-communities-section">
                    <h3 class="section-title">Public Communities</h3>
                    <div id="public-communities-list">
                        <!-- Public communities will be dynamically added here -->
                    </div>
                </div>
            </div>
            
            <!-- Messages Page Content -->
            <div id="messages-page" class="hidden messages-page-content">
                <h2 class="text-2xl font-bold mb-4">Messages</h2>
                <div id="messages-list">
                    <!-- Messages will be dynamically added here -->
                    <div id="empty-messages" class="text-center py-8 text-gray-500">
                        <i class="fas fa-comments text-4xl mb-4 opacity-50"></i>
                        <p>No messages yet. Start a conversation with someone you follow!</p>
                    </div>
                </div>
            </div>
            
            <!-- Help Page Content -->
            <div id="help-page" class="hidden help-page-content">
                <div class="text-center py-8">
                    <div class="w-24 h-24 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-question-circle text-3xl text-white"></i>
                    </div>
                    <h2 class="text-2xl font-bold mb-2">Help Center</h2>
                    <p class="text-gray-400 mb-6">Need help? We are here for you</p>
                    
                    <div class="bg-gray-800 rounded-xl p-4 mb-4">
                        <h3 class="text-lg font-bold mb-4">Help Options</h3>
                        <div class="space-y-2">
                            <div class="help-item" id="send-report-btn">
                                <i class="fas fa-envelope text-blue-400"></i>
                                <div>
                                    <p class="font-bold">Send Report</p>
                                    <p class="text-gray-400 text-sm">Report an issue or give a suggestion</p>
                                </div>
                            </div>
                            <div class="help-item">
                                <i class="fas fa-question-circle text-green-400"></i>
                                <div>
                                    <p class="font-bold">Help Center</p>
                                    <p class="text-gray-400 text-sm">Find solutions to common problems</p>
                                </div>
                            </div>
                            <div class="help-item">
                                <i class="fas fa-shield-alt text-yellow-400"></i>
                                <div>
                                    <p class="font-bold">Privacy Policy</p>
                                    <p class="text-gray-400 text-sm">Read our privacy policy</p>
                                </div>
                            </div>
                            <div class="help-item">
                                <i class="fas fa-file-contract text-purple-400"></i>
                                <div>
                                    <p class="font-bold">Terms & Conditions</p>
                                    <p class="text-gray-400 text-sm">Read the platform terms and conditions</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Search Page Content -->
            <div id="search-page" class="hidden search-page-content">
                <div class="search-container">
                    <div class="relative">
                        <input type="text" id="friend-search-input" class="search-input" placeholder="Search friends...">
                        <i class="fas fa-search search-icon"></i>
                    </div>
                    
                    <div id="search-results-container" class="mt-4">
                        <!-- Search results will be dynamically added here -->
                    </div>
                </div>
            </div>
            
            <!-- Referral Page Content -->
            <div id="referral-page" class="hidden referral-page-content">
                <div class="text-center py-4">
                    <h2 class="text-2xl font-bold mb-2">Referral Program</h2>
                    <p class="text-gray-400 mb-6">Invite friends and earn rewards</p>
                </div>
                
                <div class="airdrop-card scale-in">
                    <h3 class="text-xl font-bold mb-2">Your Referral Code</h3>
                    <div class="flex justify-between items-center mb-4">
                        <code class="text-xl font-mono bg-black bg-opacity-30 p-2 rounded" id="referral-code-display">Loading...</code>
                        <button id="copy-referral-code" class="btn-primary">
                            <i class="fas fa-copy mr-2"></i> Copy
                        </button>
                    </div>
                    <p class="text-sm opacity-80">Share this code with friends to earn rewards when they sign up!</p>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-4 mt-4">
                    <h3 class="text-lg font-bold mb-4">Referral Stats</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value" id="referrals-count">0</div>
                            <div class="stat-label">Total Referrals</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="referral-rewards">0 WHDR</div>
                            <div class="stat-label">Total Rewards</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Settings Page Content -->
            <div id="settings-page" class="hidden settings-page-content">
                <div class="text-center py-4">
                    <h2 class="text-2xl font-bold mb-2">Settings</h2>
                    <p class="text-gray-400 mb-6">Manage your account preferences</p>
                </div>
                
                <div class="bg-gray-800 rounded-xl p-4">
                    <h3 class="text-lg font-bold mb-4">App Settings</h3>
                    <div class="space-y-4">
                        <div class="setting-item">
                            <div>
                                <div class="font-bold">Notifications</div>
                                <div class="text-gray-400 text-sm">Manage app notifications</div>
                            </div>
                            <i class="fas fa-chevron-right text-gray-400"></i>
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="font-bold">Privacy & Security</div>
                                <div class="text-gray-400 text-sm">Manage your account privacy</div>
                            </div>
                            <i class="fas fa-chevron-right text-gray-400"></i>
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="font-bold">Appearance</div>
                                <div class="text-gray-400 text-sm">Change app theme</div>
                            </div>
                            <label class="theme-toggle">
                                <input type="checkbox" id="settings-theme-toggle">
                                <span class="theme-slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <div>
                                <div class="font-bold">Help & Support</div>
                                <div class="text-gray-400 text-sm">Get help</div>
                            </div>
                            <i class="fas fa-chevron-right text-gray-400"></i>
                        </div>
                        <div class="setting-item" id="settings-logout-btn">
                            <div>
                                <div class="font-bold">Log Out</div>
                                <div class="text-gray-400 text-sm">Log out of your account</div>
                            </div>
                            <i class="fas fa-sign-out-alt text-red-400"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Bottom Menu - Diperbarui sesuai instruksi -->
        <div class="bottom-menu">
            <div class="bottom-menu-item active" data-page="home">
                <i class="bottom-menu-icon fas fa-home"></i>
                <span>Home</span>
            </div>
            <div class="bottom-menu-item" data-page="search">
                <i class="bottom-menu-icon fas fa-search"></i>
                <span>Search</span>
            </div>
            <div class="bottom-menu-item" data-page="ai">
                <i class="bottom-menu-icon fas fa-robot"></i>
                <span>AI</span>
            </div>
            <div class="bottom-menu-item" data-page="wallet">
                <i class="bottom-menu-icon fas fa-wallet"></i>
                <span>Wallet</span>
            </div>
            <div class="bottom-menu-item" data-page="settings">
                <i class="bottom-menu-icon fas fa-cog"></i>
                <span>Setting</span>
            </div>
        </div>
    </div>

    <!-- Existing Modals -->
    <div id="logout-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="logout-modal-content">
                <div class="logout-icon">
                    <i class="fas fa-sign-out-alt"></i>
                </div>
                <h2 class="text-2xl font-bold mb-2">Log out of WHIDER?</h2>
                <p class="text-gray-400 mb-6">You will be logged out of your account. You can log back in anytime.</p>
                
                <div class="logout-actions">
                    <button id="cancel-logout" class="btn-secondary">
                        <i class="fas fa-times mr-2"></i> Cancel
                    </button>
                    <button id="confirm-logout" class="btn-danger">
                        <i class="fas fa-sign-out-alt mr-2"></i> Log Out
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div id="edit-profile-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="close-btn" id="close-edit-profile-modal">
                <i class="fas fa-times"></i>
            </button>
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold">Edit Profile</h2>
            </div>
            
            <form id="edit-profile-form" class="space-y-4">
                <div>
                    <label class="block text-gray-300 mb-2">Full Name</label>
                    <input 
                        type="text" 
                        id="edit-name"
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                        required
                    >
                </div>
                
                <div>
                    <label class="block text-gray-300 mb-2">Username</label>
                    <input 
                        type="text" 
                        id="edit-username"
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                        required
                    >
                </div>
                
                <div>
                    <label class="block text-gray-300 mb-2">Bio</label>
                    <textarea 
                        id="edit-bio"
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                        rows="3"
                        placeholder="Tell us about yourself"
                    ></textarea>
                </div>
                
                <div class="flex justify-between pt-4">
                    <button type="button" id="cancel-edit-profile" class="btn-secondary">
                        Cancel
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save mr-2"></i> Save Changes
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Comment Modal -->
    <div id="comment-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="close-btn" id="close-comment-modal">
                <i class="fas fa-times"></i>
            </button>
            <div id="comment-modal-content">
                <!-- Content will be dynamically added -->
            </div>
        </div>
    </div>

    <!-- Language Modal -->
    <div id="language-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="close-btn" id="close-language-modal">
                <i class="fas fa-times"></i>
            </button>
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold">Select Language</h2>
            </div>
            <div class="space-y-3">
                <div class="language-option active" data-lang="en">
                    <div class="font-bold">English</div>
                    <div class="text-gray-400 text-sm">English</div>
                </div>
                <div class="language-option" data-lang="id">
                    <div class="font-bold">Bahasa Indonesia</div>
                    <div class="text-gray-400 text-sm">Indonesian</div>
                </div>
                <div class="language-option" data-lang="ar">
                    <div class="font-bold">العربية</div>
                    <div class="text-gray-400 text-sm">Arabic</div>
                </div>
                <div class="language-option" data-lang="th">
                    <div class="font-bold">ไทย</div>
                    <div class="text-gray-400 text-sm">Thai</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Coming Soon Modal -->
    <div id="coming-soon-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="text-center">
                <div class="w-16 h-16 rounded-full bg-gray-700 flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-clock text-2xl"></i>
                </div>
                <h3 class="text-2xl font-bold mb-2">COMING SOON</h3>
                <p class="text-gray-400 mb-6">This feature is coming soon. Stay tuned for updates!</p>
                <button id="close-coming-soon-modal" class="btn-primary w-full py-3">
                    <i class="fas fa-times mr-2"></i> Close
                </button>
            </div>
        </div>
    </div>

    <!-- Report Modal -->
    <div id="report-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="close-btn" id="close-report-modal">
                <i class="fas fa-times"></i>
            </button>
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold">Send Report</h2>
            </div>
            <div class="space-y-4">
                <div>
                    <label class="block text-gray-300 mb-2">Subject</label>
                    <input 
                        type="text" 
                        id="report-subject"
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                        placeholder="Enter report subject"
                    >
                </div>
                
                <div>
                    <label class="block text-gray-300 mb-2">Message</label>
                    <textarea 
                        id="report-message"
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                        rows="5"
                        placeholder="Describe your issue or suggestion"
                    ></textarea>
                </div>
                
                <button id="send-report-btn" class="btn-primary w-full py-3">
                    <i class="fas fa-paper-plane mr-2"></i> Send Report
                </button>
                
                <p class="text-gray-400 text-sm text-center">
                    Report will be sent to: <a href="mailto:support@whider.com" class="text-blue-400">support@whider.com</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Create Community Modal -->
    <div id="create-community-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <button class="close-btn" id="close-create-community-modal">
                <i class="fas fa-times"></i>
            </button>
            <div class="text-center mb-6">
                <h2 class="text-2xl font-bold">Create Community</h2>
            </div>
            <form id="create-community-form" class="space-y-4">
                <div>
                    <label class="block text-gray-300 mb-2">Community Name</label>
                    <input 
                        type="text" 
                        id="community-name"
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                        required
                        placeholder="Enter community name"
                    >
                </div>
                
                <div>
                    <label class="block text-gray-300 mb-2">Description</label>
                    <textarea 
                        id="community-description"
                        class="w-full bg-gray-800 border border-gray-700 rounded-lg p-3 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all"
                        rows="3"
                        placeholder="Describe your community"
                    ></textarea>
                </div>
                
                <div>
                    <label class="block text-gray-300 mb-2">Privacy</label>
                    <div class="flex space-x-4">
                        <label class="flex items-center">
                            <input type="radio" name="privacy" value="public" checked class="mr-2">
                            <span>Public</span>
                        </label>
                        <label class="flex items-center">
                            <input type="radio" name="privacy" value="private" class="mr-2">
                            <span>Private</span>
                        </label>
                    </div>
                </div>
                
                <div class="flex justify-between pt-4">
                    <button type="button" id="cancel-create-community" class="btn-secondary">
                        Cancel
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-plus mr-2"></i> Create Community
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // App state dengan tambahan fitur referral
        let posts = [];
        let currentUser = null;
        let mediaFiles = [];
        let comments = {};
        let isLoggedIn = false;
        let currentPage = 'home';
        let searchTimeout = null;
        let allUsers = [];
        let currentProfileUser = null;
        let hashtags = {};
        let currentLanguage = 'en';
        let isLightMode = false;
        let registeredUsers = [];
        let communities = [];
        let communityLogoFile = null;
        let communityChats = {};
        let directMessages = {};
        let currentChatUser = null;
        let chatMediaFiles = [];
        
        // Airdrop state - Diperbarui sesuai permintaan
        let airdropTasks = [
            { id: 1, name: 'Follow WHIDER on X', reward: 20, claimed: false, externalLink: 'https://x.com/WHIDER10?t=fJ0jHYKRwyiOas3HHIumsQ&s=09' },
            { id: 2, name: 'Retweet + Link', reward: 20, claimed: false, externalLink: 'https://x.com/WHIDER10/status/1981317804319224221?t=UZaswmshTpAMxHyZpb1Bww&s=19' },
            { id: 3, name: 'Connect Web3 Wallet', reward: 0, claimed: false, comingSoon: true },
            { id: 4, name: 'Join Community', reward: 0, claimed: false, comingSoon: true },
            { id: 5, name: 'Refer Friends', reward: 20, claimed: false },
            { id: 6, name: '1 Postingan = 0.5 WHIDER', reward: 0.5, claimed: false, type: 'posting' }
        ];
        let totalAirdropEarned = 0;

        // Referral state
        let userReferralCode = '';
        let referralsCount = 0;
        let referralRewards = 0;

        // DOM elements dengan tambahan elemen baru
        const elements = {
            // Login/Register
            loginScreen: document.getElementById('login-screen'),
            registerScreen: document.getElementById('register-screen'),
            loginForm: document.getElementById('login-form'),
            registerForm: document.getElementById('register-form'),
            switchToRegister: document.getElementById('switch-to-register'),
            switchToLogin: document.getElementById('switch-to-login'),
            walletLoginBtn: document.getElementById('wallet-login-btn'),
            registerReferral: document.getElementById('register-referral'),
            
            // Main App
            mainApp: document.getElementById('main-app'),
            
            // Navigation
            topMenuItems: document.querySelectorAll('.top-menu-item'),
            bottomMenuItems: document.querySelectorAll('.bottom-menu-item'),
            moreMenuBtn: document.getElementById('more-menu-btn'),
            moreMenu: document.getElementById('more-menu'),
            languageBtn: document.getElementById('language-btn'),
            
            // Home Page
            homePage: document.getElementById('home-page'),
            userAvatar: document.getElementById('user-avatar'),
            tweetInput: document.getElementById('tweet-input'),
            tweetBtn: document.getElementById('tweet-btn'),
            imageBtn: document.getElementById('image-btn'),
            videoBtn: document.getElementById('video-btn'),
            imageUpload: document.getElementById('image-upload'),
            videoUpload: document.getElementById('video-upload'),
            mediaPreview: document.getElementById('media-preview'),
            feed: document.getElementById('feed'),
            emptyFeed: document.getElementById('empty-feed'),
            
            // New Pages
            airdropPage: document.getElementById('airdrop-page'),
            walletPage: document.getElementById('wallet-page'),
            aiPage: document.getElementById('ai-page'),
            referralPage: document.getElementById('referral-page'),
            settingsPage: document.getElementById('settings-page'),
            
            // Airdrop Elements
            totalAirdropEarned: document.getElementById('total-airdrop-earned'),
            airdropProgressBar: document.getElementById('airdrop-progress-bar'),
            airdropTasksContainer: document.getElementById('airdrop-tasks'),
            maxAirdropReward: document.getElementById('max-airdrop-reward'),
            
            // Wallet Elements
            redirectWalletBtn: document.getElementById('redirect-wallet-btn'),
            
            // Profile Page
            profilePage: document.getElementById('profile-page'),
            profileAvatar: document.getElementById('profile-avatar'),
            profileName: document.getElementById('profile-name'),
            profileUsername: document.getElementById('profile-username'),
            profileBio: document.getElementById('profile-bio'),
            profilePostsCount: document.getElementById('profile-posts-count'),
            profileFollowers: document.getElementById('profile-followers'),
            profileFollowing: document.getElementById('profile-following'),
            editProfileBtn: document.getElementById('edit-profile-btn'),
            userPosts: document.getElementById('user-posts'),
            postsCount: document.getElementById('posts-count'),
            followersCount: document.getElementById('followers-count'),
            followingCount: document.getElementById('following-count'),
            followBtn: document.getElementById('follow-btn'),
            unfollowBtn: document.getElementById('unfollow-btn'),
            sendMessageBtn: document.getElementById('send-message-btn'),
            verifiedBadge: document.getElementById('verified-badge'),
            
            // Messages Page
            messagesPage: document.getElementById('messages-page'),
            messagesList: document.getElementById('messages-list'),
            emptyMessages: document.getElementById('empty-messages'),
            
            // Other Pages
            explorePage: document.getElementById('explore-page'),
            communitiesPage: document.getElementById('communities-page'),
            helpPage: document.getElementById('help-page'),
            searchPage: document.getElementById('search-page'),
            friendSearchInput: document.getElementById('friend-search-input'),
            searchResultsContainer: document.getElementById('search-results-container'),
            
            // Referral Elements
            referralCodeDisplay: document.getElementById('referral-code-display'),
            copyReferralCode: document.getElementById('copy-referral-code'),
            referralsCount: document.getElementById('referrals-count'),
            referralRewards: document.getElementById('referral-rewards'),
            
            // Settings Elements
            settingsThemeToggle: document.getElementById('settings-theme-toggle'),
            settingsLogoutBtn: document.getElementById('settings-logout-btn'),
            
            // Modals
            logoutModal: document.getElementById('logout-modal'),
            cancelLogout: document.getElementById('cancel-logout'),
            confirmLogout: document.getElementById('confirm-logout'),
            editProfileModal: document.getElementById('edit-profile-modal'),
            closeEditProfileModal: document.getElementById('close-edit-profile-modal'),
            cancelEditProfile: document.getElementById('cancel-edit-profile'),
            editProfileForm: document.getElementById('edit-profile-form'),
            commentModal: document.getElementById('comment-modal'),
            closeCommentModal: document.getElementById('close-comment-modal'),
            commentModalContent: document.getElementById('comment-modal-content'),
            languageModal: document.getElementById('language-modal'),
            closeLanguageModal: document.getElementById('close-language-modal'),
            logoutSettingBtn: document.getElementById('logout-setting-btn'),
            comingSoonModal: document.getElementById('coming-soon-modal'),
            closeComingSoonModal: document.getElementById('close-coming-soon-modal'),
            reportModal: document.getElementById('report-modal'),
            closeReportModal: document.getElementById('close-report-modal'),
            sendReportBtn: document.getElementById('send-report-btn'),
            
            // Notification
            notification: document.getElementById('notification'),
            notificationIcon: document.getElementById('notification-icon'),
            notificationMessage: document.getElementById('notification-message'),
            
            // Password Toggles
            loginPasswordToggle: document.getElementById('login-password-toggle'),
            registerPasswordToggle: document.getElementById('register-password-toggle'),
            registerConfirmPasswordToggle: document.getElementById('register-confirm-password-toggle'),
            
            // Community Elements
            createCommunityBtn: document.getElementById('create-community-btn'),
            communitiesList: document.getElementById('communities-list'),
            noCommunities: document.getElementById('no-communities'),
            discoverCommunitiesBtn: document.getElementById('discover-communities-btn'),
            publicCommunitiesList: document.getElementById('public-communities-list'),
            
            // Create Community Modal
            createCommunityModal: document.getElementById('create-community-modal'),
            closeCreateCommunityModal: document.getElementById('close-create-community-modal'),
            cancelCreateCommunity: document.getElementById('cancel-create-community'),
            createCommunityForm: document.getElementById('create-community-form')
        };

        // Function untuk generate kode referral
        function generateReferralCode() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
            let result = '';
            for (let i = 0; i < 8; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }

        // Function untuk menghitung total reward yang mungkin
        function getTotalPossibleReward() {
            return airdropTasks
                .filter(task => !task.comingSoon && task.reward > 0)
                .reduce((total, task) => total + task.reward, 0);
        }

        // Function untuk mengecek kelayakan task postingan pertama
        function checkFirstPostEligibility() {
            if (!currentUser) return;
            
            const userPostsCount = posts.filter(p => p.user.id === currentUser.id).length;
            if (userPostsCount >= 1) {
                const task = airdropTasks.find(t => t.id === 6);
                if (task && !task.claimed) {
                    claimAirdropTask(6);
                }
            }
        }

        // Initialize app dengan fitur baru
        function initApp() {
            // Load data dari localStorage
            try {
                loadUserData();
                loadPosts();
                loadComments();
                loadAllUsers();
                loadHashtags();
                loadThemePreference();
                loadRegisteredUsers();
                loadCommunities();
                loadCommunityChats();
                loadDirectMessages();
                loadAirdropData();
                loadReferralData();
                
                // Perbaikan: Cek apakah ada user yang sudah login
                if (isLoggedIn && currentUser) {
                    showScreen('main');
                    navigateTo('home');
                    updateUI();
                    checkFirstPostEligibility();
                } else {
                    showScreen('login');
                }
            } catch (error) {
                console.error('Error loading data:', error);
                showNotification('Error loading data. Resetting application.', 'error');
                resetAppData();
            }
            
            setupEventListeners();
        }

        // Load referral data
        function loadReferralData() {
            const savedReferralData = localStorage.getItem('whider-referral-data');
            if (savedReferralData) {
                const data = JSON.parse(savedReferralData);
                userReferralCode = data.referralCode || '';
                referralsCount = data.referralsCount || 0;
                referralRewards = data.referralRewards || 0;
                
                // Jika user belum punya kode referral, generate baru
                if (!userReferralCode && currentUser) {
                    userReferralCode = generateReferralCode();
                    saveReferralData();
                }
            } else if (currentUser) {
                // Generate kode referral baru untuk user
                userReferralCode = generateReferralCode();
                saveReferralData();
            }
        }

        // Save referral data
        function saveReferralData() {
            const data = {
                referralCode: userReferralCode,
                referralsCount: referralsCount,
                referralRewards: referralRewards
            };
            localStorage.setItem('whider-referral-data', JSON.stringify(data));
        }

        // Setup event listeners dengan tambahan untuk fitur baru
        function setupEventListeners() {
            // Login/Register
            elements.loginForm.addEventListener('submit', handleLogin);
            elements.registerForm.addEventListener('submit', handleRegister);
            elements.switchToRegister.addEventListener('click', () => showScreen('register'));
            elements.switchToLogin.addEventListener('click', () => showScreen('login'));
            elements.walletLoginBtn.addEventListener('click', showComingSoon);
            
            // Password toggles
            elements.loginPasswordToggle.addEventListener('click', () => togglePasswordVisibility('login-password'));
            elements.registerPasswordToggle.addEventListener('click', () => togglePasswordVisibility('register-password'));
            elements.registerConfirmPasswordToggle.addEventListener('click', () => togglePasswordVisibility('register-confirm-password'));
            
            // Navigation
            elements.topMenuItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    const page = e.currentTarget.getAttribute('data-page');
                    if (page) {
                        if (page === 'profile') {
                            // When clicking profile menu, show current user's profile
                            currentProfileUser = currentUser;
                        }
                        navigateTo(page);
                    }
                });
            });
            
            elements.bottomMenuItems.forEach(item => {
                item.addEventListener('click', (e) => {
                    const page = e.currentTarget.getAttribute('data-page');
                    if (page) {
                        if (page === 'wallet') {
                            // Redirect to external wallet website
                            window.open('https://whiderwallet.netlify.app/', '_blank');
                            return;
                        }
                        navigateTo(page);
                    }
                });
            });
            
            // More menu
            elements.moreMenuBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                elements.moreMenu.classList.toggle('show');
            });
            
            // More menu items
            document.querySelectorAll('.more-menu-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    const page = e.currentTarget.getAttribute('data-page');
                    if (page) {
                        if (page === 'profile') {
                            currentProfileUser = currentUser;
                        }
                        navigateTo(page);
                    } else if (e.currentTarget.id === 'language-btn') {
                        showModal('language');
                    }
                    elements.moreMenu.classList.remove('show');
                });
            });
            
            // Close more menu when clicking outside
            document.addEventListener('click', () => {
                elements.moreMenu.classList.remove('show');
            });
            
            // Wallet redirect
            elements.redirectWalletBtn.addEventListener('click', () => {
                window.open('https://whiderwallet.netlify.app/', '_blank');
            });
            
            // Airdrop tasks
            document.addEventListener('click', (e) => {
                if (e.target.classList.contains('claim-airdrop-btn') || e.target.closest('.claim-airdrop-btn')) {
                    const taskId = parseInt(e.target.closest('.claim-airdrop-btn').getAttribute('data-id'));
                    claimAirdropTask(taskId);
                }
                
                // Handle external link tasks
                if (e.target.classList.contains('external-link-btn') || e.target.closest('.external-link-btn')) {
                    const taskId = parseInt(e.target.closest('.external-link-btn').getAttribute('data-id'));
                    const task = airdropTasks.find(t => t.id === taskId);
                    if (task && task.externalLink) {
                        window.open(task.externalLink, '_blank');
                    }
                }
                
                // Handle coming soon tasks
                if (e.target.classList.contains('coming-soon-btn') || e.target.closest('.coming-soon-btn')) {
                    showComingSoon();
                }
            });
            
            // Referral
            elements.copyReferralCode.addEventListener('click', copyReferralCode);
            
            // Settings page
            elements.settingsThemeToggle.addEventListener('change', toggleTheme);
            elements.settingsLogoutBtn.addEventListener('click', showLogoutModal);
            
            // Tweet input
            elements.tweetInput.addEventListener('input', handleTweetInput);
            
            // Tweet button
            elements.tweetBtn.addEventListener('click', createPost);
            
            // Media upload buttons
            elements.imageBtn.addEventListener('click', () => elements.imageUpload.click());
            elements.imageUpload.addEventListener('change', handleImageUpload);
            
            elements.videoBtn.addEventListener('click', () => elements.videoUpload.click());
            elements.videoUpload.addEventListener('change', handleVideoUpload);
            
            // Avatar upload
            const avatarUpload = document.getElementById('avatar-upload');
            const profileAvatarEdit = document.querySelector('.profile-avatar-edit');
            
            if (avatarUpload && profileAvatarEdit) {
                profileAvatarEdit.addEventListener('click', () => avatarUpload.click());
                avatarUpload.addEventListener('change', handleAvatarUpload);
            }
            
            // Edit profile
            elements.editProfileBtn.addEventListener('click', () => showModal('edit-profile'));
            elements.closeEditProfileModal.addEventListener('click', () => hideModal('edit-profile'));
            elements.cancelEditProfile.addEventListener('click', () => hideModal('edit-profile'));
            elements.editProfileForm.addEventListener('submit', handleEditProfile);
            
            // Send message button
            if (elements.sendMessageBtn) {
                elements.sendMessageBtn.addEventListener('click', () => {
                    if (currentProfileUser && currentProfileUser.id !== currentUser.id) {
                        openDirectChat(currentProfileUser);
                    }
                });
            }
            
            // Logout
            elements.cancelLogout.addEventListener('click', () => hideModal('logout'));
            elements.confirmLogout.addEventListener('click', handleLogout);
            
            // Close modals
            elements.closeLanguageModal.addEventListener('click', () => hideModal('language'));
            elements.closeComingSoonModal.addEventListener('click', () => hideModal('coming-soon'));
            elements.closeReportModal.addEventListener('click', () => hideModal('report'));
            
            // Report
            elements.sendReportBtn.addEventListener('click', sendReport);
            
            // Help items
            document.querySelectorAll('.help-item').forEach(item => {
                item.addEventListener('click', (e) => {
                    if (e.currentTarget.querySelector('i').classList.contains('fa-envelope')) {
                        showModal('report');
                    } else {
                        showComingSoon();
                    }
                });
            });
            
            // Theme toggle
            const themeToggle = document.getElementById('theme-toggle');
            if (themeToggle) {
                themeToggle.addEventListener('change', toggleTheme);
            }
            
            // Search
            elements.friendSearchInput.addEventListener('input', handleFriendSearch);
            
            // Close modal when clicking outside
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.add('hidden');
                    }
                });
            });
            
            // Close comment modal
            elements.closeCommentModal.addEventListener('click', () => hideModal('comment'));
            
            // Explore items
            document.querySelectorAll('.explore-item').forEach(item => {
                item.addEventListener('click', () => {
                    showNotification('COMING SOON NEXT UPDATE', 'info');
                });
            });
            
            // Community creation
            elements.createCommunityBtn.addEventListener('click', () => showModal('create-community'));
            elements.closeCreateCommunityModal.addEventListener('click', () => hideModal('create-community'));
            elements.cancelCreateCommunity.addEventListener('click', () => hideModal('create-community'));
            elements.createCommunityForm.addEventListener('submit', handleCreateCommunity);
            
            // Discover communities
            elements.discoverCommunitiesBtn.addEventListener('click', () => {
                navigateTo('communities');
                document.querySelector('.public-communities-section').scrollIntoView({ behavior: 'smooth' });
            });
        }

        // Toggle password visibility
        function togglePasswordVisibility(inputId) {
            const input = document.getElementById(inputId);
            const toggle = document.getElementById(`${inputId}-toggle`);
            
            if (input.type === 'password') {
                input.type = 'text';
                toggle.innerHTML = '<i class="fas fa-eye-slash"></i>';
            } else {
                input.type = 'password';
                toggle.innerHTML = '<i class="fas fa-eye"></i>';
            }
        }

        // Show/hide screens
        function showScreen(screen) {
            elements.loginScreen.classList.add('hidden');
            elements.registerScreen.classList.add('hidden');
            elements.mainApp.classList.add('hidden');
            
            if (screen === 'login') {
                elements.loginScreen.classList.remove('hidden');
            } else if (screen === 'register') {
                elements.registerScreen.classList.remove('hidden');
            } else if (screen === 'main') {
                elements.mainApp.classList.remove('hidden');
            }
        }

        // Navigate to page dengan halaman baru
        function navigateTo(page) {
            currentPage = page;
            
            // Sembunyikan semua halaman
            elements.homePage.classList.add('hidden');
            elements.airdropPage.classList.add('hidden');
            elements.walletPage.classList.add('hidden');
            elements.aiPage.classList.add('hidden');
            elements.profilePage.classList.add('hidden');
            elements.explorePage.classList.add('hidden');
            elements.communitiesPage.classList.add('hidden');
            elements.messagesPage.classList.add('hidden');
            elements.helpPage.classList.add('hidden');
            elements.searchPage.classList.add('hidden');
            elements.referralPage.classList.add('hidden');
            elements.settingsPage.classList.add('hidden');
            
            // Reset active state untuk semua menu items
            elements.topMenuItems.forEach(item => {
                item.classList.remove('active');
            });
            
            elements.bottomMenuItems.forEach(item => {
                item.classList.remove('active');
            });
            
            // Tampilkan halaman yang dipilih
            if (page === 'home') {
                elements.homePage.classList.remove('hidden');
                document.querySelector('.bottom-menu-item[data-page="home"]').classList.add('active');
                renderPosts();
            } else if (page === 'airdrop') {
                elements.airdropPage.classList.remove('hidden');
                renderAirdropTasks();
            } else if (page === 'wallet') {
                elements.walletPage.classList.remove('hidden');
                document.querySelector('.bottom-menu-item[data-page="wallet"]').classList.add('active');
            } else if (page === 'ai') {
                elements.aiPage.classList.remove('hidden');
                document.querySelector('.bottom-menu-item[data-page="ai"]').classList.add('active');
            } else if (page === 'profile') {
                elements.profilePage.classList.remove('hidden');
                document.querySelector('.top-menu-item[data-page="profile"]').classList.add('active');
                updateProfilePage();
            } else if (page === 'explore') {
                elements.explorePage.classList.remove('hidden');
            } else if (page === 'communities') {
                elements.communitiesPage.classList.remove('hidden');
                document.querySelector('.top-menu-item[data-page="communities"]').classList.add('active');
                renderCommunities();
                renderPublicCommunities();
            } else if (page === 'messages') {
                elements.messagesPage.classList.remove('hidden');
                document.querySelector('.top-menu-item[data-page="messages"]').classList.add('active');
                renderMessagesPage();
            } else if (page === 'help') {
                elements.helpPage.classList.remove('hidden');
            } else if (page === 'search') {
                elements.searchPage.classList.remove('hidden');
                document.querySelector('.bottom-menu-item[data-page="search"]').classList.add('active');
                renderFriendSearch();
            } else if (page === 'referral') {
                elements.referralPage.classList.remove('hidden');
                updateReferralPage();
            } else if (page === 'settings') {
                elements.settingsPage.classList.remove('hidden');
                document.querySelector('.top-menu-item[data-page="settings"]').classList.add('active');
                document.querySelector('.bottom-menu-item[data-page="settings"]').classList.add('active');
            }
        }

        // Update referral page
        function updateReferralPage() {
            elements.referralCodeDisplay.textContent = userReferralCode;
            elements.referralsCount.textContent = referralsCount;
            elements.referralRewards.textContent = `${referralRewards} WHDR`;
        }

        // Copy referral code
        function copyReferralCode() {
            navigator.clipboard.writeText(userReferralCode)
                .then(() => {
                    showNotification('Referral code copied to clipboard!', 'success');
                })
                .catch(err => {
                    console.error('Failed to copy: ', err);
                    showNotification('Failed to copy referral code', 'error');
                });
        }

        // Render airdrop tasks - Diperbarui sesuai permintaan
        function renderAirdropTasks() {
            elements.airdropTasksContainer.innerHTML = '';
            
            airdropTasks.forEach(task => {
                const taskElement = document.createElement('div');
                taskElement.className = 'airdrop-task';
                
                let buttonHtml = '';
                
                if (task.externalLink) {
                    // Task dengan link eksternal
                    buttonHtml = `
                        <button class="btn-primary external-link-btn" data-id="${task.id}">
                            <i class="fas fa-external-link-alt mr-2"></i> Go
                        </button>
                    `;
                } else if (task.comingSoon) {
                    // Task coming soon
                    buttonHtml = `
                        <button class="btn-secondary coming-soon-btn" data-id="${task.id}">
                            Coming Soon
                        </button>
                    `;
                } else if (task.type === 'posting') {
                    // Task postingan
                    buttonHtml = `
                        <button class="${task.claimed ? 'btn-secondary' : 'btn-primary'} claim-airdrop-btn" data-id="${task.id}" ${task.claimed ? 'disabled' : ''}>
                            ${task.claimed ? 'Claimed' : 'Claim'}
                        </button>
                    `;
                } else {
                    // Task normal dengan claim
                    buttonHtml = `
                        <button class="${task.claimed ? 'btn-secondary' : 'btn-primary'} claim-airdrop-btn" data-id="${task.id}" ${task.claimed ? 'disabled' : ''}>
                            ${task.claimed ? 'Claimed' : 'Claim'}
                        </button>
                    `;
                }
                
                taskElement.innerHTML = `
                    <div class="airdrop-task-info">
                        <div class="airdrop-task-icon">
                            <i class="fas ${getTaskIcon(task.id)}"></i>
                        </div>
                        <div class="airdrop-task-details">
                            <div class="airdrop-task-title">${task.name}</div>
                            <div class="airdrop-task-reward">${task.reward} WHIDER</div>
                            ${task.claimed ? '<div class="airdrop-task-status">Claimed</div>' : ''}
                        </div>
                    </div>
                    ${buttonHtml}
                `;
                
                elements.airdropTasksContainer.appendChild(taskElement);
            });
            
            // Update total earned and progress
            elements.totalAirdropEarned.textContent = `${totalAirdropEarned} WHIDER`;
            const totalPossible = getTotalPossibleReward();
            const progressPercentage = totalPossible > 0 ? (totalAirdropEarned / totalPossible) * 100 : 0;
            elements.airdropProgressBar.style.width = `${progressPercentage}%`;
            
            // Update max reward display
            elements.maxAirdropReward.textContent = `${totalPossible} WHIDER`;
        }

        // Get task icon based on task ID
        function getTaskIcon(taskId) {
            switch(taskId) {
                case 1: return 'fa-user-plus';
                case 2: return 'fa-retweet';
                case 3: return 'fa-wallet';
                case 4: return 'fa-users';
                case 5: return 'fa-share-alt';
                case 6: return 'fa-feather';
                default: return 'fa-tasks';
            }
        }

        // Claim airdrop task
        function claimAirdropTask(taskId) {
            const task = airdropTasks.find(t => t.id === taskId);
            
            if (!task) {
                showNotification('Task not found', 'error');
                return;
            }
            
            if (task.claimed) {
                showNotification('Task already claimed', 'info');
                return;
            }
            
            // Jika task coming soon, jangan beri reward
            if (task.comingSoon) {
                showNotification('This feature is coming soon!', 'info');
                return;
            }
            
            // Mark task as claimed
            task.claimed = true;
            totalAirdropEarned += task.reward;
            
            // Update UI
            renderAirdropTasks();
            
            // Save airdrop data
            saveAirdropData();
            
            showNotification(`Successfully claimed ${task.reward} WHIDER tokens!`, 'success');
        }

        // Handle login
        function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('login-email').value;
            const password = document.getElementById('login-password').value;
            
            // Simple validation
            if (!email || !password) {
                showNotification('Please fill all fields', 'error');
                return;
            }
            
            // Check if user exists in registered users
            const userExists = registeredUsers.some(user => user.email === email && user.password === password);
            
            if (!userExists) {
                showNotification('Invalid email or password', 'error');
                return;
            }
            
            // Simulate login with delay for better UX
            showNotification('Processing login...', 'info');
            
            setTimeout(() => {
                // Find the user in all users
                const userData = allUsers.find(user => user.email === email);
                
                if (userData) {
                    currentUser = userData;
                    isLoggedIn = true;
                    saveUserData();
                    showScreen('main');
                    updateUI();
                    navigateTo('home');
                    checkFirstPostEligibility();
                    
                    // Clear form
                    elements.loginForm.reset();
                    
                    showNotification('Login successful!', 'success');
                } else {
                    showNotification('Invalid email or password', 'error');
                }
            }, 1000);
        }

        // Handle register dengan kode referral
        function handleRegister(e) {
            e.preventDefault();
            const name = document.getElementById('register-name').value;
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('register-confirm-password').value;
            const referralInput = document.getElementById('register-referral').value;
            
            // Validation
            if (!name || !username || !email || !password || !confirmPassword) {
                showNotification('Please fill all required fields', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showNotification('Passwords do not match', 'error');
                return;
            }
            
            if (password.length < 8) {
                showNotification('Password must be at least 8 characters', 'error');
                return;
            }
            
            // Check if username already exists
            if (allUsers.some(user => user.username === username)) {
                showNotification('Username already taken', 'error');
                return;
            }
            
            // Check if email already exists
            if (allUsers.some(user => user.email === email)) {
                showNotification('Email already registered', 'error');
                return;
            }
            
            // Process referral code if provided
            if (referralInput) {
                // Find the user with this referral code
                const referringUserData = localStorage.getItem('whider-referral-data');
                if (referringUserData) {
                    const referralData = JSON.parse(referringUserData);
                    if (referralData.referralCode === referralInput) {
                        // Valid referral code - update referral stats
                        const updatedReferralData = {
                            ...referralData,
                            referralsCount: (referralData.referralsCount || 0) + 1,
                            referralRewards: (referralData.referralRewards || 0) + 20
                        };
                        localStorage.setItem('whider-referral-data', JSON.stringify(updatedReferralData));
                        
                        // Update airdrop task for referring user
                        const airdropData = localStorage.getItem('whider-airdrop-data');
                        if (airdropData) {
                            const airdrop = JSON.parse(airdropData);
                            const referralTask = airdrop.tasks.find(t => t.id === 5);
                            if (referralTask && !referralTask.claimed) {
                                referralTask.claimed = true;
                                airdrop.totalEarned += 20;
                                localStorage.setItem('whider-airdrop-data', JSON.stringify(airdrop));
                            }
                        }
                        
                        showNotification('Referral code applied!', 'success');
                    } else {
                        showNotification('Invalid referral code', 'error');
                    }
                } else {
                    showNotification('Invalid referral code', 'error');
                }
            }
            
            // Create new user
            const newUser = {
                id: allUsers.length + 1,
                name,
                username,
                email,
                password,
                bio: '',
                followers: [],
                following: [],
                posts: [],
                createdAt: new Date().toISOString(),
                // Tambahkan properti isVerified untuk admin
                isVerified: email === 'whiderr@gmail.com'
            };
            
            // Add to registered users
            registeredUsers.push({
                email,
                password
            });
            
            // Add to all users
            allUsers.push(newUser);
            
            // Save data
            saveRegisteredUsers();
            saveAllUsers();
            
            // Generate referral code for new user
            userReferralCode = generateReferralCode();
            saveReferralData();
            
            // Simulate registration success with delay
            showNotification('Creating your account...', 'info');
            
            setTimeout(() => {
                // Auto login
                currentUser = newUser;
                isLoggedIn = true;
                saveUserData();
                
                // Create welcome post
                const welcomePost = {
                    id: Date.now(),
                    content: `Hello WHIDER community! I'm ${name} and I'm excited to join this amazing platform! 🎉`,
                    user: {
                        id: newUser.id,
                        name: newUser.name,
                        username: newUser.username,
                        isVerified: newUser.isVerified
                    },
                    timestamp: new Date().toISOString(),
                    likes: [],
                    reposts: [],
                    comments: [],
                    media: []
                };
                
                posts.unshift(welcomePost);
                savePosts();
                
                // Clear form
                elements.registerForm.reset();
                
                // Show main app
                showScreen('main');
                updateUI();
                navigateTo('home');
                
                showNotification('Registration successful! Welcome to WHIDER!', 'success');
                
                // Check eligibility for first post task
                checkFirstPostEligibility();
            }, 1500);
        }

        // Handle create post - Diperbarui untuk task postingan
        function createPost() {
            const content = elements.tweetInput.value.trim();
            
            if (!content && mediaFiles.length === 0) {
                showNotification('Post cannot be empty', 'error');
                return;
            }
            
            // Create new post
            const newPost = {
                id: Date.now(),
                content,
                user: {
                    id: currentUser.id,
                    name: currentUser.name,
                    username: currentUser.username,
                    isVerified: currentUser.isVerified
                },
                timestamp: new Date().toISOString(),
                likes: [],
                reposts: [],
                comments: [],
                media: [...mediaFiles]
            };
            
            // Add to posts
            posts.unshift(newPost);
            
            // Reset form
            elements.tweetInput.value = '';
            mediaFiles = [];
            elements.mediaPreview.innerHTML = '';
            elements.mediaPreview.classList.add('hidden');
            updateTweetButton();
            
            // Save posts
            savePosts();
            
            // Render posts
            renderPosts();
            
            // Check for airdrop task eligibility
            checkFirstPostEligibility();
            
            showNotification('Post published!', 'success');
        }

        // Show notification
        function showNotification(message, type = 'info') {
            elements.notification.className = `notification ${type}`;
            elements.notificationMessage.textContent = message;
            
            // Set icon based on type
            if (type === 'success') {
                elements.notificationIcon.className = 'fas fa-check-circle';
            } else if (type === 'error') {
                elements.notificationIcon.className = 'fas fa-exclamation-circle';
            } else {
                elements.notificationIcon.className = 'fas fa-info-circle';
            }
            
            elements.notification.classList.remove('hidden');
            elements.notification.classList.add('show');
            
            // Auto hide after 3 seconds
            setTimeout(() => {
                elements.notification.classList.remove('show');
                setTimeout(() => {
                    elements.notification.classList.add('hidden');
                }, 300);
            }, 3000);
        }

        // Update UI after login
        function updateUI() {
            if (currentUser) {
                // Update user avatar in home page
                const initials = currentUser.name.charAt(0).toUpperCase();
                elements.userAvatar.textContent = initials;
                
                // Update profile page
                updateProfilePage();
                
                // Update referral page
                updateReferralPage();
            }
        }

        // Update profile page
        function updateProfilePage() {
            const user = currentProfileUser || currentUser;
            
            if (user) {
                // Update profile info
                elements.profileName.textContent = user.name;
                elements.profileUsername.textContent = `@${user.username}`;
                elements.profileBio.textContent = user.bio || 'No bio yet';
                
                // Update avatar
                const initials = user.name.charAt(0).toUpperCase();
                elements.profileAvatar.textContent = initials;
                
                // Update verified badge
                if (user.isVerified) {
                    elements.verifiedBadge.classList.remove('hidden');
                } else {
                    elements.verifiedBadge.classList.add('hidden');
                }
                
                // Update stats
                const userPostsCount = posts.filter(p => p.user.id === user.id).length;
                elements.profilePostsCount.textContent = userPostsCount;
                elements.postsCount.querySelector('.stat-value').textContent = userPostsCount;
                
                const followersCount = user.followers ? user.followers.length : 0;
                elements.profileFollowers.textContent = followersCount;
                elements.followersCount.querySelector('.stat-value').textContent = followersCount;
                
                const followingCount = user.following ? user.following.length : 0;
                elements.profileFollowing.textContent = followingCount;
                elements.followingCount.querySelector('.stat-value').textContent = followingCount;
                
                // Render user posts
                renderUserPosts();
                
                // Show/hide follow buttons
                const isOwnProfile = user.id === currentUser.id;
                elements.followBtn.classList.toggle('hidden', isOwnProfile);
                elements.unfollowBtn.classList.toggle('hidden', isOwnProfile);
                elements.editProfileBtn.classList.toggle('hidden', !isOwnProfile);
                elements.sendMessageBtn.classList.toggle('hidden', isOwnProfile);
                
                // Set follow button state
                const isFollowing = currentUser.following && currentUser.following.includes(user.id);
                elements.followBtn.classList.toggle('hidden', isFollowing || isOwnProfile);
                elements.unfollowBtn.classList.toggle('hidden', !isFollowing || isOwnProfile);
            }
        }

        // Render user posts
        function renderUserPosts() {
            const user = currentProfileUser || currentUser;
            const userPosts = posts.filter(p => p.user.id === user.id);
            
            elements.userPosts.innerHTML = '';
            
            if (userPosts.length === 0) {
                elements.userPosts.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-feather text-4xl mb-4 opacity-50"></i>
                        <p>No posts yet.</p>
                    </div>
                `;
                return;
            }
            
            userPosts.forEach(post => {
                const postElement = createPostElement(post);
                elements.userPosts.appendChild(postElement);
            });
        }

        // Render posts
        function renderPosts() {
            elements.feed.innerHTML = '';
            
            if (posts.length === 0) {
                elements.emptyFeed.classList.remove('hidden');
                return;
            }
            
            elements.emptyFeed.classList.add('hidden');
            
            posts.forEach(post => {
                const postElement = createPostElement(post);
                elements.feed.appendChild(postElement);
            });
        }

        // Create post element
        function createPostElement(post) {
            const postElement = document.createElement('div');
            postElement.className = 'twitter-card p-4 fade-in';
            
            // Check if current user liked or reposted this post
            const isLiked = post.likes.includes(currentUser.id);
            const isReposted = post.reposts.includes(currentUser.id);
            
            // Format timestamp
            const postTime = new Date(post.timestamp);
            const now = new Date();
            const diffMs = now - postTime;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            let timeDisplay = '';
            if (diffMins < 60) {
                timeDisplay = `${diffMins}m`;
            } else if (diffHours < 24) {
                timeDisplay = `${diffHours}h`;
            } else {
                timeDisplay = `${diffDays}d`;
            }
            
            // Format content to handle hashtags and mentions
            let formattedContent = post.content;
            
            // Handle hashtags
            formattedContent = formattedContent.replace(/#(\w+)/g, '<span class="text-blue-400 cursor-pointer">#$1</span>');
            
            // Handle mentions
            formattedContent = formattedContent.replace(/@(\w+)/g, '<span class="text-blue-400 cursor-pointer">@$1</span>');
            
            // Create media HTML if any
            let mediaHtml = '';
            if (post.media && post.media.length > 0) {
                mediaHtml = '<div class="media-preview mt-3 grid gap-2">';
                post.media.forEach(media => {
                    if (media.type.startsWith('image')) {
                        mediaHtml += `<img src="${media.url}" alt="Post media" class="rounded-xl max-h-96 object-cover">`;
                    } else if (media.type.startsWith('video')) {
                        mediaHtml += `
                            <video controls class="rounded-xl max-h-96 w-full">
                                <source src="${media.url}" type="${media.type}">
                                Your browser does not support the video tag.
                            </video>
                        `;
                    }
                });
                mediaHtml += '</div>';
            }
            
            postElement.innerHTML = `
                <div class="flex space-x-3">
                    <div class="flex-shrink-0">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center text-white font-bold">
                            ${post.user.name.charAt(0).toUpperCase()}
                        </div>
                    </div>
                    <div class="flex-1 min-w-0">
                        <div class="flex items-center space-x-2 mb-1">
                            <span class="font-bold">${post.user.name}</span>
                            ${post.user.isVerified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                            <span class="text-gray-500">@${post.user.username}</span>
                            <span class="text-gray-500">·</span>
                            <span class="text-gray-500">${timeDisplay}</span>
                        </div>
                        <div class="text-gray-200 mb-3">
                            ${formattedContent}
                        </div>
                        ${mediaHtml}
                        <div class="flex justify-between mt-3 max-w-md">
                            <button class="action-btn comment-btn ${post.comments.length > 0 ? 'text-blue-400' : ''}" data-post-id="${post.id}">
                                <i class="far fa-comment"></i>
                                <span class="ml-1">${post.comments.length}</span>
                            </button>
                            <button class="action-btn repost-btn ${isReposted ? 'active-repost' : ''}" data-post-id="${post.id}">
                                <i class="fas fa-retweet"></i>
                                <span class="ml-1">${post.reposts.length}</span>
                            </button>
                            <button class="action-btn like-btn ${isLiked ? 'active-like' : ''}" data-post-id="${post.id}">
                                <i class="${isLiked ? 'fas' : 'far'} fa-heart"></i>
                                <span class="ml-1">${post.likes.length}</span>
                            </button>
                            <button class="action-btn share-btn" data-post-id="${post.id}">
                                <i class="far fa-share-square"></i>
                            </button>
                        </div>
                        
                        <!-- Comment Section -->
                        <div class="comment-section" id="comments-${post.id}">
                            ${post.comments.length > 0 ? `
                                <div class="text-sm text-gray-500 mb-2">${post.comments.length} comments</div>
                                ${post.comments.slice(0, 2).map(comment => `
                                    <div class="comment">
                                        <div class="flex items-start space-x-2">
                                            <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                                                ${comment.user.name.charAt(0).toUpperCase()}
                                            </div>
                                            <div class="flex-1">
                                                <div class="flex items-center space-x-2">
                                                    <span class="font-bold text-sm">${comment.user.name}</span>
                                                    ${comment.user.isVerified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                                                    <span class="text-gray-500 text-xs">@${comment.user.username}</span>
                                                </div>
                                                <div class="text-gray-200 text-sm mt-1">${comment.content}</div>
                                            </div>
                                        </div>
                                    </div>
                                `).join('')}
                                ${post.comments.length > 2 ? `
                                    <button class="text-blue-400 text-sm mt-2 view-all-comments" data-post-id="${post.id}">
                                        View all ${post.comments.length} comments
                                    </button>
                                ` : ''}
                            ` : ''}
                            
                            <!-- Add Comment -->
                            <div class="flex items-start space-x-2 mt-3">
                                <div class="w-8 h-8 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center text-white text-xs font-bold flex-shrink-0">
                                    ${currentUser.name.charAt(0).toUpperCase()}
                                </div>
                                <div class="flex-1">
                                    <input type="text" 
                                           class="w-full bg-gray-800 border border-gray-700 rounded-full px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" 
                                           placeholder="Write a comment..."
                                           data-post-id="${post.id}">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                ${post.user.id === currentUser.id ? `
                    <button class="delete-post-btn" data-post-id="${post.id}">
                        <i class="fas fa-trash"></i>
                    </button>
                ` : ''}
            `;
            
            // Add event listeners
            const likeBtn = postElement.querySelector('.like-btn');
            const repostBtn = postElement.querySelector('.repost-btn');
            const commentBtn = postElement.querySelector('.comment-btn');
            const shareBtn = postElement.querySelector('.share-btn');
            const commentInput = postElement.querySelector('input[data-post-id]');
            const deleteBtn = postElement.querySelector('.delete-post-btn');
            const viewAllCommentsBtn = postElement.querySelector('.view-all-comments');
            
            likeBtn.addEventListener('click', () => handleLike(post.id));
            repostBtn.addEventListener('click', () => handleRepost(post.id));
            commentBtn.addEventListener('click', () => showComments(post.id));
            shareBtn.addEventListener('click', () => handleShare(post.id));
            
            if (commentInput) {
                commentInput.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' && e.target.value.trim()) {
                        addComment(post.id, e.target.value.trim());
                        e.target.value = '';
                    }
                });
            }
            
            if (deleteBtn) {
                deleteBtn.addEventListener('click', () => deletePost(post.id));
            }
            
            if (viewAllCommentsBtn) {
                viewAllCommentsBtn.addEventListener('click', () => showComments(post.id));
            }
            
            return postElement;
        }

        // Handle like
        function handleLike(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            const likeIndex = post.likes.indexOf(currentUser.id);
            
            if (likeIndex === -1) {
                // Like the post
                post.likes.push(currentUser.id);
            } else {
                // Unlike the post
                post.likes.splice(likeIndex, 1);
            }
            
            savePosts();
            renderPosts();
        }

        // Handle repost
        function handleRepost(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            const repostIndex = post.reposts.indexOf(currentUser.id);
            
            if (repostIndex === -1) {
                // Repost
                post.reposts.push(currentUser.id);
            } else {
                // Remove repost
                post.reposts.splice(repostIndex, 1);
            }
            
            savePosts();
            renderPosts();
        }

        // Show comments modal
        function showComments(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            // Format timestamp
            const postTime = new Date(post.timestamp);
            const now = new Date();
            const diffMs = now - postTime;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            let timeDisplay = '';
            if (diffMins < 60) {
                timeDisplay = `${diffMins}m`;
            } else if (diffHours < 24) {
                timeDisplay = `${diffHours}h`;
            } else {
                timeDisplay = `${diffDays}d`;
            }
            
            // Create media HTML if any
            let mediaHtml = '';
            if (post.media && post.media.length > 0) {
                mediaHtml = '<div class="media-preview mt-3">';
                post.media.forEach(media => {
                    if (media.type.startsWith('image')) {
                        mediaHtml += `<img src="${media.url}" alt="Post media" class="rounded-xl max-h-96 w-full object-cover">`;
                    } else if (media.type.startsWith('video')) {
                        mediaHtml += `
                            <video controls class="rounded-xl max-h-96 w-full">
                                <source src="${media.url}" type="${media.type}">
                                Your browser does not support the video tag.
                            </video>
                        `;
                    }
                });
                mediaHtml += '</div>';
            }
            
            elements.commentModalContent.innerHTML = `
                <div class="twitter-card p-4 border-0">
                    <div class="flex space-x-3">
                        <div class="flex-shrink-0">
                            <div class="w-12 h-12 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center text-white font-bold">
                                ${post.user.name.charAt(0).toUpperCase()}
                            </div>
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex items-center space-x-2 mb-1">
                                <span class="font-bold">${post.user.name}</span>
                                ${post.user.isVerified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                                <span class="text-gray-500">@${post.user.username}</span>
                                <span class="text-gray-500">·</span>
                                <span class="text-gray-500">${timeDisplay}</span>
                            </div>
                            <div class="text-gray-200 mb-3">
                                ${post.content}
                            </div>
                            ${mediaHtml}
                        </div>
                    </div>
                </div>
                
                <div class="comment-section">
                    <h3 class="text-lg font-bold mb-4">Comments (${post.comments.length})</h3>
                    
                    <div class="space-y-4 mb-6 max-h-96 overflow-y-auto">
                        ${post.comments.length > 0 ? 
                            post.comments.map(comment => {
                                const commentTime = new Date(comment.timestamp);
                                const commentDiffMs = now - commentTime;
                                const commentDiffMins = Math.floor(commentDiffMs / 60000);
                                const commentDiffHours = Math.floor(commentDiffMs / 3600000);
                                const commentDiffDays = Math.floor(commentDiffMs / 86400000);
                                
                                let commentTimeDisplay = '';
                                if (commentDiffMins < 60) {
                                    commentTimeDisplay = `${commentDiffMins}m`;
                                } else if (commentDiffHours < 24) {
                                    commentTimeDisplay = `${commentDiffHours}h`;
                                } else {
                                    commentTimeDisplay = `${commentDiffDays}d`;
                                }
                                
                                return `
                                    <div class="comment">
                                        <div class="flex items-start space-x-3">
                                            <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center text-white font-bold flex-shrink-0">
                                                ${comment.user.name.charAt(0).toUpperCase()}
                                            </div>
                                            <div class="flex-1">
                                                <div class="flex items-center space-x-2 mb-1">
                                                    <span class="font-bold">${comment.user.name}</span>
                                                    ${comment.user.isVerified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                                                    <span class="text-gray-500">@${comment.user.username}</span>
                                                    <span class="text-gray-500">·</span>
                                                    <span class="text-gray-500">${commentTimeDisplay}</span>
                                                </div>
                                                <div class="text-gray-200">${comment.content}</div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            }).join('') 
                            : 
                            '<div class="text-center py-8 text-gray-500">No comments yet. Be the first to comment!</div>'
                        }
                    </div>
                    
                    <div class="flex items-start space-x-3">
                        <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-green-500 flex items-center justify-center text-white font-bold flex-shrink-0">
                            ${currentUser.name.charAt(0).toUpperCase()}
                        </div>
                        <div class="flex-1">
                            <textarea 
                                class="w-full bg-gray-800 border border-gray-700 rounded-xl p-3 text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none" 
                                rows="3"
                                placeholder="Write a comment..."
                                id="modal-comment-input"
                            ></textarea>
                            <div class="flex justify-end mt-2">
                                <button id="modal-comment-btn" class="btn-primary" data-post-id="${post.id}">
                                    <i class="fas fa-paper-plane mr-2"></i> Comment
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add event listener for comment button
            const modalCommentBtn = document.getElementById('modal-comment-btn');
            const modalCommentInput = document.getElementById('modal-comment-input');
            
            modalCommentBtn.addEventListener('click', () => {
                if (modalCommentInput.value.trim()) {
                    addComment(post.id, modalCommentInput.value.trim());
                    modalCommentInput.value = '';
                    hideModal('comment');
                }
            });
            
            modalCommentInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && e.ctrlKey && modalCommentInput.value.trim()) {
                    addComment(post.id, modalCommentInput.value.trim());
                    modalCommentInput.value = '';
                    hideModal('comment');
                }
            });
            
            showModal('comment');
        }

        // Add comment
        function addComment(postId, content) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            const newComment = {
                id: Date.now(),
                content,
                user: {
                    id: currentUser.id,
                    name: currentUser.name,
                    username: currentUser.username,
                    isVerified: currentUser.isVerified
                },
                timestamp: new Date().toISOString()
            };
            
            post.comments.push(newComment);
            savePosts();
            renderPosts();
            
            showNotification('Comment added!', 'success');
        }

        // Handle share
        function handleShare(postId) {
            const post = posts.find(p => p.id === postId);
            if (!post) return;
            
            // In a real app, this would open a share dialog
            // For demo, we'll just copy the post content to clipboard
            const shareText = `${post.user.name} (@${post.user.username}): ${post.content}`;
            
            navigator.clipboard.writeText(shareText)
                .then(() => {
                    showNotification('Post copied to clipboard!', 'success');
                })
                .catch(err => {
                    console.error('Failed to copy: ', err);
                    showNotification('Failed to copy post', 'error');
                });
        }

        // Delete post
        function deletePost(postId) {
            if (!confirm('Are you sure you want to delete this post?')) {
                return;
            }
            
            const postIndex = posts.findIndex(p => p.id === postId);
            if (postIndex === -1) return;
            
            posts.splice(postIndex, 1);
            savePosts();
            renderPosts();
            
            // Update profile page if we're on it
            if (currentPage === 'profile') {
                updateProfilePage();
            }
            
            showNotification('Post deleted', 'success');
        }

        // Handle tweet input
        function handleTweetInput() {
            updateTweetButton();
        }

        // Update tweet button state
        function updateTweetButton() {
            const content = elements.tweetInput.value.trim();
            const hasContent = content.length > 0 || mediaFiles.length > 0;
            
            elements.tweetBtn.disabled = !hasContent;
            elements.tweetBtn.classList.toggle('opacity-50', !hasContent);
            elements.tweetBtn.classList.toggle('cursor-not-allowed', !hasContent);
        }

        // Handle image upload
        function handleImageUpload(e) {
            const files = Array.from(e.target.files);
            
            files.forEach(file => {
                if (!file.type.startsWith('image/')) {
                    showNotification('Please select image files only', 'error');
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = (event) => {
                    const media = {
                        type: file.type,
                        url: event.target.result,
                        file: file
                    };
                    
                    mediaFiles.push(media);
                    renderMediaPreview();
                    updateTweetButton();
                };
                reader.readAsDataURL(file);
            });
            
            // Reset the input so the same file can be selected again
            e.target.value = '';
        }

        // Handle video upload
        function handleVideoUpload(e) {
            const file = e.target.files[0];
            
            if (!file.type.startsWith('video/')) {
                showNotification('Please select a video file', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = (event) => {
                const media = {
                    type: file.type,
                    url: event.target.result,
                    file: file
                };
                
                mediaFiles.push(media);
                renderMediaPreview();
                updateTweetButton();
            };
            reader.readAsDataURL(file);
            
            // Reset the input so the same file can be selected again
            e.target.value = '';
        }

        // Handle avatar upload
        function handleAvatarUpload(e) {
            const file = e.target.files[0];
            
            if (!file || !file.type.startsWith('image/')) {
                showNotification('Please select an image file', 'error');
                return;
            }
            
            const reader = new FileReader();
            reader.onload = (event) => {
                // In a real app, you would upload the image to a server
                // For this demo, we'll just store it in localStorage
                currentUser.avatar = event.target.result;
                saveUserData();
                
                // Update UI
                elements.profileAvatar.style.backgroundImage = `url(${event.target.result})`;
                elements.profileAvatar.style.backgroundSize = 'cover';
                elements.profileAvatar.textContent = '';
                
                elements.userAvatar.style.backgroundImage = `url(${event.target.result})`;
                elements.userAvatar.style.backgroundSize = 'cover';
                elements.userAvatar.textContent = '';
                
                showNotification('Profile picture updated!', 'success');
            };
            reader.readAsDataURL(file);
            
            // Reset the input so the same file can be selected again
            e.target.value = '';
        }

        // Render media preview
        function renderMediaPreview() {
            elements.mediaPreview.innerHTML = '';
            
            if (mediaFiles.length === 0) {
                elements.mediaPreview.classList.add('hidden');
                return;
            }
            
            elements.mediaPreview.classList.remove('hidden');
            
            mediaFiles.forEach((media, index) => {
                const mediaElement = document.createElement('div');
                mediaElement.className = 'media-preview-item relative inline-block mr-2 mb-2';
                
                if (media.type.startsWith('image')) {
                    mediaElement.innerHTML = `
                        <img src="${media.url}" alt="Preview" class="w-32 h-32 object-cover rounded-lg">
                        <button class="remove-media" data-index="${index}">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                } else if (media.type.startsWith('video')) {
                    mediaElement.innerHTML = `
                        <video class="w-32 h-32 object-cover rounded-lg">
                            <source src="${media.url}" type="${media.type}">
                        </video>
                        <button class="remove-media" data-index="${index}">
                            <i class="fas fa-times"></i>
                        </button>
                    `;
                }
                
                elements.mediaPreview.appendChild(mediaElement);
            });
            
            // Add event listeners for remove buttons
            elements.mediaPreview.querySelectorAll('.remove-media').forEach(button => {
                button.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('.remove-media').getAttribute('data-index'));
                    mediaFiles.splice(index, 1);
                    renderMediaPreview();
                    updateTweetButton();
                });
            });
        }

        // Show modal
        function showModal(modal) {
            if (modal === 'logout') {
                elements.logoutModal.classList.remove('hidden');
            } else if (modal === 'edit-profile') {
                // Fill form with current user data
                document.getElementById('edit-name').value = currentUser.name;
                document.getElementById('edit-username').value = currentUser.username;
                document.getElementById('edit-bio').value = currentUser.bio || '';
                
                elements.editProfileModal.classList.remove('hidden');
            } else if (modal === 'comment') {
                elements.commentModal.classList.remove('hidden');
            } else if (modal === 'language') {
                elements.languageModal.classList.remove('hidden');
            } else if (modal === 'coming-soon') {
                elements.comingSoonModal.classList.remove('hidden');
            } else if (modal === 'report') {
                elements.reportModal.classList.remove('hidden');
            } else if (modal === 'create-community') {
                elements.createCommunityModal.classList.remove('hidden');
            }
        }

        // Hide modal
        function hideModal(modal) {
            if (modal === 'logout') {
                elements.logoutModal.classList.add('hidden');
            } else if (modal === 'edit-profile') {
                elements.editProfileModal.classList.add('hidden');
            } else if (modal === 'comment') {
                elements.commentModal.classList.add('hidden');
            } else if (modal === 'language') {
                elements.languageModal.classList.add('hidden');
            } else if (modal === 'coming-soon') {
                elements.comingSoonModal.classList.add('hidden');
            } else if (modal === 'report') {
                elements.reportModal.classList.add('hidden');
            } else if (modal === 'create-community') {
                elements.createCommunityModal.classList.add('hidden');
            }
        }

        // Show logout modal
        function showLogoutModal() {
            showModal('logout');
        }

        // Handle logout
        function handleLogout() {
            isLoggedIn = false;
            currentUser = null;
            saveUserData();
            
            hideModal('logout');
            showScreen('login');
            
            // Clear any media files
            mediaFiles = [];
            
            showNotification('Logged out successfully', 'success');
        }

        // Handle edit profile
        function handleEditProfile(e) {
            e.preventDefault();
            
            const name = document.getElementById('edit-name').value;
            const username = document.getElementById('edit-username').value;
            const bio = document.getElementById('edit-bio').value;
            
            // Validation
            if (!name || !username) {
                showNotification('Name and username are required', 'error');
                return;
            }
            
            // Check if username is already taken by another user
            const usernameTaken = allUsers.some(user => 
                user.username === username && user.id !== currentUser.id
            );
            
            if (usernameTaken) {
                showNotification('Username already taken', 'error');
                return;
            }
            
            // Update user data
            currentUser.name = name;
            currentUser.username = username;
            currentUser.bio = bio;
            
            // Update posts by this user
            posts.forEach(post => {
                if (post.user.id === currentUser.id) {
                    post.user.name = name;
                    post.user.username = username;
                }
            });
            
            // Update comments by this user
            posts.forEach(post => {
                post.comments.forEach(comment => {
                    if (comment.user.id === currentUser.id) {
                        comment.user.name = name;
                        comment.user.username = username;
                    }
                });
            });
            
            // Save data
            saveUserData();
            savePosts();
            saveAllUsers();
            
            // Update UI
            updateUI();
            
            hideModal('edit-profile');
            
            showNotification('Profile updated successfully!', 'success');
        }

        // Show coming soon modal
        function showComingSoon() {
            showModal('coming-soon');
        }

        // Send report
        function sendReport() {
            const subject = document.getElementById('report-subject').value;
            const message = document.getElementById('report-message').value;
            
            if (!subject || !message) {
                showNotification('Please fill all fields', 'error');
                return;
            }
            
            // In a real app, this would send the report to a server
            // For this demo, we'll just show a success message
            
            hideModal('report');
            
            // Clear form
            document.getElementById('report-subject').value = '';
            document.getElementById('report-message').value = '';
            
            showNotification('Report sent successfully!', 'success');
        }

        // Toggle theme
        function toggleTheme() {
            isLightMode = !isLightMode;
            document.body.classList.toggle('light-mode', isLightMode);
            
            // Save theme preference
            localStorage.setItem('whider-theme', isLightMode ? 'light' : 'dark');
            
            showNotification(`Switched to ${isLightMode ? 'light' : 'dark'} mode`, 'info');
        }

        // Handle friend search
        function handleFriendSearch() {
            clearTimeout(searchTimeout);
            
            searchTimeout = setTimeout(() => {
                const query = elements.friendSearchInput.value.trim().toLowerCase();
                
                if (!query) {
                    renderFriendSearch();
                    return;
                }
                
                const results = allUsers.filter(user => 
                    user.name.toLowerCase().includes(query) || 
                    user.username.toLowerCase().includes(query)
                );
                
                renderSearchResults(results);
            }, 300);
        }

        // Render friend search
        function renderFriendSearch() {
            elements.searchResultsContainer.innerHTML = `
                <div class="text-center py-8 text-gray-500">
                    <i class="fas fa-search text-4xl mb-4 opacity-50"></i>
                    <p>Search for friends by name or username</p>
                </div>
            `;
        }

        // Render search results
        function renderSearchResults(users) {
            elements.searchResultsContainer.innerHTML = '';
            
            if (users.length === 0) {
                elements.searchResultsContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-user-slash text-4xl mb-4 opacity-50"></i>
                        <p>No users found</p>
                    </div>
                `;
                return;
            }
            
            users.forEach(user => {
                const userElement = document.createElement('div');
                userElement.className = 'user-result-item';
                
                const isFollowing = currentUser.following && currentUser.following.includes(user.id);
                const isOwnProfile = user.id === currentUser.id;
                
                userElement.innerHTML = `
                    <div class="user-result-info">
                        <div class="user-result-avatar">
                            ${user.name.charAt(0).toUpperCase()}
                        </div>
                        <div>
                            <div class="user-result-name">
                                ${user.name}
                                ${user.isVerified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                            </div>
                            <div class="user-result-username">@${user.username}</div>
                        </div>
                    </div>
                    <div class="search-actions">
                        ${!isOwnProfile ? `
                            <button class="${isFollowing ? 'unfollow-btn' : 'follow-btn'} follow-action-btn" data-user-id="${user.id}">
                                ${isFollowing ? 'Following' : 'Follow'}
                            </button>
                            <button class="btn-secondary send-message-search-btn" data-user-id="${user.id}">
                                <i class="fas fa-envelope mr-2"></i> Message
                            </button>
                        ` : ''}
                    </div>
                `;
                
                elements.searchResultsContainer.appendChild(userElement);
            });
            
            // Add event listeners for follow and message buttons
            document.querySelectorAll('.follow-action-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const userId = parseInt(e.target.getAttribute('data-user-id'));
                    toggleFollow(userId);
                });
            });
            
            document.querySelectorAll('.send-message-search-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    const userId = parseInt(e.target.getAttribute('data-user-id'));
                    const user = allUsers.find(u => u.id === userId);
                    if (user) {
                        openDirectChat(user);
                    }
                });
            });
        }

        // Toggle follow
        function toggleFollow(userId) {
            const user = allUsers.find(u => u.id === userId);
            if (!user) return;
            
            const isFollowing = currentUser.following && currentUser.following.includes(userId);
            
            if (isFollowing) {
                // Unfollow
                currentUser.following = currentUser.following.filter(id => id !== userId);
                user.followers = user.followers ? user.followers.filter(id => id !== currentUser.id) : [];
            } else {
                // Follow
                if (!currentUser.following) currentUser.following = [];
                currentUser.following.push(userId);
                
                if (!user.followers) user.followers = [];
                user.followers.push(currentUser.id);
            }
            
            // Save data
            saveUserData();
            saveAllUsers();
            
            // Update UI
            if (currentPage === 'profile' && currentProfileUser && currentProfileUser.id === userId) {
                updateProfilePage();
            }
            
            // Update search results
            const query = elements.friendSearchInput.value.trim();
            if (query) {
                const results = allUsers.filter(user => 
                    user.name.toLowerCase().includes(query.toLowerCase()) || 
                    user.username.toLowerCase().includes(query.toLowerCase())
                );
                renderSearchResults(results);
            }
            
            showNotification(`${isFollowing ? 'Unfollowed' : 'Following'} @${user.username}`, 'success');
        }

        // Render communities
        function renderCommunities() {
            const userCommunities = communities.filter(community => 
                community.members.includes(currentUser.id)
            );
            
            elements.communitiesList.innerHTML = '';
            
            if (userCommunities.length === 0) {
                elements.noCommunities.classList.remove('hidden');
                return;
            }
            
            elements.noCommunities.classList.add('hidden');
            
            userCommunities.forEach(community => {
                const communityElement = createCommunityElement(community);
                elements.communitiesList.appendChild(communityElement);
            });
        }

        // Render public communities
        function renderPublicCommunities() {
            const publicCommunities = communities.filter(community => 
                community.privacy === 'public' && !community.members.includes(currentUser.id)
            );
            
            elements.publicCommunitiesList.innerHTML = '';
            
            if (publicCommunities.length === 0) {
                elements.publicCommunitiesList.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <i class="fas fa-users text-4xl mb-4 opacity-50"></i>
                        <p>No public communities available</p>
                    </div>
                `;
                return;
            }
            
            publicCommunities.forEach(community => {
                const communityElement = createCommunityElement(community, true);
                elements.publicCommunitiesList.appendChild(communityElement);
            });
        }

        // Create community element
        function createCommunityElement(community, isPublic = false) {
            const communityElement = document.createElement('div');
            communityElement.className = 'community-card';
            
            const isMember = community.members.includes(currentUser.id);
            const isOwner = community.owner === currentUser.id;
            
            communityElement.innerHTML = `
                <div class="community-header">
                    <div class="community-logo">
                        ${community.name.charAt(0).toUpperCase()}
                    </div>
                    <div class="community-info">
                        <div class="community-name">${community.name}</div>
                        <div class="community-bio">${community.description}</div>
                        <div class="community-members">
                            <i class="fas fa-users mr-1"></i>
                            ${community.members.length} members
                        </div>
                    </div>
                    <div class="community-actions">
                        ${isPublic && !isMember ? `
                            <button class="btn-primary join-community-btn" data-community-id="${community.id}">
                                <i class="fas fa-plus mr-2"></i> Join
                            </button>
                        ` : ''}
                        ${isMember ? `
                            <button class="btn-secondary view-community-btn" data-community-id="${community.id}">
                                <i class="fas fa-door-open mr-2"></i> View
                            </button>
                        ` : ''}
                    </div>
                </div>
            `;
            
            // Add event listeners
            const joinBtn = communityElement.querySelector('.join-community-btn');
            const viewBtn = communityElement.querySelector('.view-community-btn');
            
            if (joinBtn) {
                joinBtn.addEventListener('click', () => joinCommunity(community.id));
            }
            
            if (viewBtn) {
                viewBtn.addEventListener('click', () => viewCommunity(community.id));
            }
            
            return communityElement;
        }

        // Handle create community
        function handleCreateCommunity(e) {
            e.preventDefault();
            
            const name = document.getElementById('community-name').value;
            const description = document.getElementById('community-description').value;
            const privacy = document.querySelector('input[name="privacy"]:checked').value;
            
            if (!name) {
                showNotification('Community name is required', 'error');
                return;
            }
            
            // Create new community
            const newCommunity = {
                id: communities.length + 1,
                name,
                description,
                privacy,
                owner: currentUser.id,
                members: [currentUser.id],
                createdAt: new Date().toISOString()
            };
            
            communities.push(newCommunity);
            saveCommunities();
            
            hideModal('create-community');
            
            // Clear form
            elements.createCommunityForm.reset();
            
            // Navigate to communities page
            navigateTo('communities');
            
            showNotification(`Community "${name}" created successfully!`, 'success');
        }

        // Join community
        function joinCommunity(communityId) {
            const community = communities.find(c => c.id === communityId);
            if (!community) return;
            
            // Add user to community members
            if (!community.members.includes(currentUser.id)) {
                community.members.push(currentUser.id);
                saveCommunities();
                
                // Update UI
                renderCommunities();
                renderPublicCommunities();
                
                showNotification(`Joined ${community.name} community!`, 'success');
                
                // Check for airdrop task
                const task = airdropTasks.find(t => t.id === 4);
                if (task && !task.claimed) {
                    claimAirdropTask(4);
                }
            }
        }

        // View community
        function viewCommunity(communityId) {
            // In a real app, this would navigate to the community page
            // For this demo, we'll show a notification
            const community = communities.find(c => c.id === communityId);
            if (community) {
                showNotification(`Viewing ${community.name} community`, 'info');
            }
        }

        // Render messages page
        function renderMessagesPage() {
            // Get users that current user has conversations with
            const conversationUsers = allUsers.filter(user => 
                user.id !== currentUser.id && 
                (directMessages[user.id] || directMessages[currentUser.id + '-' + user.id])
            );
            
            elements.messagesList.innerHTML = '';
            
            if (conversationUsers.length === 0) {
                elements.emptyMessages.classList.remove('hidden');
                return;
            }
            
            elements.emptyMessages.classList.add('hidden');
            
            conversationUsers.forEach(user => {
                const messageElement = createMessageElement(user);
                elements.messagesList.appendChild(messageElement);
            });
        }

        // Create message element
        function createMessageElement(user) {
            const messageElement = document.createElement('div');
            messageElement.className = 'message-item';
            
            // Get last message
            const conversationId = currentUser.id < user.id ? 
                `${currentUser.id}-${user.id}` : `${user.id}-${currentUser.id}`;
            const messages = directMessages[conversationId] || [];
            const lastMessage = messages.length > 0 ? messages[messages.length - 1] : null;
            
            messageElement.innerHTML = `
                <div class="message-avatar">
                    ${user.name.charAt(0).toUpperCase()}
                </div>
                <div class="message-content">
                    <div class="message-user">
                        ${user.name}
                        ${user.isVerified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                    </div>
                    <div class="message-preview">
                        ${lastMessage ? lastMessage.content : 'No messages yet'}
                    </div>
                </div>
                ${lastMessage ? `
                    <div class="message-time">
                        ${formatMessageTime(lastMessage.timestamp)}
                    </div>
                ` : ''}
            `;
            
            messageElement.addEventListener('click', () => {
                openDirectChat(user);
            });
            
            return messageElement;
        }

        // Format message time
        function formatMessageTime(timestamp) {
            const messageTime = new Date(timestamp);
            const now = new Date();
            const diffMs = now - messageTime;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 60) {
                return `${diffMins}m`;
            } else if (diffHours < 24) {
                return `${diffHours}h`;
            } else {
                return `${diffDays}d`;
            }
        }

        // Open direct chat
        function openDirectChat(user) {
            currentChatUser = user;
            
            // Navigate to messages page
            navigateTo('messages');
            
            // Create chat interface
            elements.messagesList.innerHTML = `
                <div class="direct-chat-container">
                    <div class="flex items-center p-4 border-b border-gray-800">
                        <button class="mr-4 text-gray-400 back-to-messages">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <div class="message-avatar">
                            ${user.name.charAt(0).toUpperCase()}
                        </div>
                        <div class="ml-3">
                            <div class="font-bold">
                                ${user.name}
                                ${user.isVerified ? '<span class="verified-badge"><i class="fas fa-check-circle"></i></span>' : ''}
                            </div>
                            <div class="text-gray-400 text-sm">@${user.username}</div>
                        </div>
                    </div>
                    
                    <div class="direct-chat-messages flex-1 p-4" id="direct-chat-messages">
                        <!-- Messages will be loaded here -->
                    </div>
                    
                    <div class="direct-chat-input-container">
                        <input type="text" 
                               class="direct-chat-input" 
                               placeholder="Type a message..."
                               id="direct-chat-input">
                        <button class="direct-chat-send-btn" id="direct-chat-send-btn">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            `;
            
            // Load messages
            loadDirectChatMessages(user);
            
            // Add event listeners
            document.querySelector('.back-to-messages').addEventListener('click', () => {
                renderMessagesPage();
            });
            
            document.getElementById('direct-chat-send-btn').addEventListener('click', sendDirectMessage);
            
            document.getElementById('direct-chat-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendDirectMessage();
                }
            });
        }

        // Load direct chat messages
        function loadDirectChatMessages(user) {
            const conversationId = currentUser.id < user.id ? 
                `${currentUser.id}-${user.id}` : `${user.id}-${currentUser.id}`;
            const messages = directMessages[conversationId] || [];
            
            const messagesContainer = document.getElementById('direct-chat-messages');
            messagesContainer.innerHTML = '';
            
            if (messages.length === 0) {
                messagesContainer.innerHTML = `
                    <div class="text-center py-8 text-gray-500">
                        <p>No messages yet. Start a conversation!</p>
                    </div>
                `;
                return;
            }
            
            messages.forEach(message => {
                const messageElement = document.createElement('div');
                messageElement.className = `direct-chat-message ${message.senderId === currentUser.id ? 'sent' : 'received'}`;
                
                messageElement.innerHTML = `
                    <div class="direct-chat-message-content">
                        ${message.content}
                    </div>
                    <div class="direct-chat-message-time">
                        ${formatMessageTime(message.timestamp)}
                    </div>
                `;
                
                messagesContainer.appendChild(messageElement);
            });
            
            // Scroll to bottom
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Send direct message
        function sendDirectMessage() {
            const input = document.getElementById('direct-chat-input');
            const content = input.value.trim();
            
            if (!content || !currentChatUser) return;
            
            const conversationId = currentUser.id < currentChatUser.id ? 
                `${currentUser.id}-${currentChatUser.id}` : `${currentChatUser.id}-${currentUser.id}`;
            
            if (!directMessages[conversationId]) {
                directMessages[conversationId] = [];
            }
            
            const newMessage = {
                id: Date.now(),
                content,
                senderId: currentUser.id,
                receiverId: currentChatUser.id,
                timestamp: new Date().toISOString()
            };
            
            directMessages[conversationId].push(newMessage);
            saveDirectMessages();
            
            // Clear input
            input.value = '';
            
            // Reload messages
            loadDirectChatMessages(currentChatUser);
            
            // Update messages page
            renderMessagesPage();
        }

        // Save and load functions untuk data baru
        function saveAirdropData() {
            const data = {
                tasks: airdropTasks,
                totalEarned: totalAirdropEarned
            };
            localStorage.setItem('whider-airdrop-data', JSON.stringify(data));
        }

        function loadAirdropData() {
            const savedAirdropData = localStorage.getItem('whider-airdrop-data');
            if (savedAirdropData) {
                const data = JSON.parse(savedAirdropData);
                airdropTasks = data.tasks || airdropTasks;
                totalAirdropEarned = data.totalEarned || totalAirdropEarned;
            }
        }

        function saveCommunities() {
            localStorage.setItem('whider-communities', JSON.stringify(communities));
        }

        function loadCommunities() {
            const savedCommunities = localStorage.getItem('whider-communities');
            if (savedCommunities) {
                communities = JSON.parse(savedCommunities);
            } else {
                // Create some sample communities
                communities = [
                    {
                        id: 1,
                        name: 'WHIDER Official',
                        description: 'The official WHIDER community',
                        privacy: 'public',
                        owner: 1,
                        members: [1, 2, 3],
                        createdAt: new Date().toISOString()
                    },
                    {
                        id: 2,
                        name: 'Crypto Enthusiasts',
                        description: 'Discussing all things crypto and blockchain',
                        privacy: 'public',
                        owner: 2,
                        members: [2, 3],
                        createdAt: new Date().toISOString()
                    }
                ];
                saveCommunities();
            }
        }

        function saveCommunityChats() {
            localStorage.setItem('whider-community-chats', JSON.stringify(communityChats));
        }

        function loadCommunityChats() {
            const savedCommunityChats = localStorage.getItem('whider-community-chats');
            if (savedCommunityChats) {
                communityChats = JSON.parse(savedCommunityChats);
            }
        }

        function saveDirectMessages() {
            localStorage.setItem('whider-direct-messages', JSON.stringify(directMessages));
        }

        function loadDirectMessages() {
            const savedDirectMessages = localStorage.getItem('whider-direct-messages');
            if (savedDirectMessages) {
                directMessages = JSON.parse(savedDirectMessages);
            }
        }

        // Existing save and load functions
        function saveUserData() {
            const data = {
                currentUser,
                isLoggedIn
            };
            localStorage.setItem('whider-user', JSON.stringify(data));
        }

        function loadUserData() {
            const savedUserData = localStorage.getItem('whider-user');
            if (savedUserData) {
                const data = JSON.parse(savedUserData);
                currentUser = data.currentUser;
                isLoggedIn = data.isLoggedIn;
            }
        }

        function savePosts() {
            localStorage.setItem('whider-posts', JSON.stringify(posts));
        }

        function loadPosts() {
            const savedPosts = localStorage.getItem('whider-posts');
            if (savedPosts) {
                posts = JSON.parse(savedPosts);
            } else {
                // Create sample posts
                posts = [
                    {
                        id: 1,
                        content: 'Welcome to WHIDER! The future of social communities is here. 🚀',
                        user: {
                            id: 1,
                            name: 'WHIDER Admin',
                            username: 'whider',
                            isVerified: true
                        },
                        timestamp: new Date().toISOString(),
                        likes: [1, 2, 3],
                        reposts: [1, 2],
                        comments: [
                            {
                                id: 1,
                                content: 'Excited to be here!',
                                user: {
                                    id: 2,
                                    name: 'Test User',
                                    username: 'testuser',
                                    isVerified: false
                                },
                                timestamp: new Date().toISOString()
                            }
                        ],
                        media: []
                    }
                ];
                savePosts();
            }
        }

        function saveComments() {
            localStorage.setItem('whider-comments', JSON.stringify(comments));
        }

        function loadComments() {
            const savedComments = localStorage.getItem('whider-comments');
            if (savedComments) {
                comments = JSON.parse(savedComments);
            }
        }

        function saveAllUsers() {
            localStorage.setItem('whider-all-users', JSON.stringify(allUsers));
        }

        function loadAllUsers() {
            const savedAllUsers = localStorage.getItem('whider-all-users');
            if (savedAllUsers) {
                allUsers = JSON.parse(savedAllUsers);
            } else {
                // Create sample users
                allUsers = [
                    {
                        id: 1,
                        name: 'WHIDER Admin',
                        username: 'whider',
                        email: 'admin@whider.com',
                        password: 'admin123',
                        bio: 'Official WHIDER account',
                        followers: [2, 3],
                        following: [2, 3],
                        posts: [1],
                        createdAt: new Date().toISOString(),
                        isVerified: true
                    },
                    {
                        id: 2,
                        name: 'Test User',
                        username: 'testuser',
                        email: 'test@example.com',
                        password: 'test123',
                        bio: 'Just a test user',
                        followers: [1, 3],
                        following: [1],
                        posts: [],
                        createdAt: new Date().toISOString(),
                        isVerified: false
                    },
                    {
                        id: 3,
                        name: 'John Doe',
                        username: 'johndoe',
                        email: 'john@example.com',
                        password: 'john123',
                        bio: 'Crypto enthusiast',
                        followers: [1],
                        following: [1, 2],
                        posts: [],
                        createdAt: new Date().toISOString(),
                        isVerified: false
                    }
                ];
                saveAllUsers();
            }
        }

        function saveHashtags() {
            localStorage.setItem('whider-hashtags', JSON.stringify(hashtags));
        }

        function loadHashtags() {
            const savedHashtags = localStorage.getItem('whider-hashtags');
            if (savedHashtags) {
                hashtags = JSON.parse(savedHashtags);
            }
        }

        function loadThemePreference() {
            const savedTheme = localStorage.getItem('whider-theme');
            isLightMode = savedTheme === 'light';
            document.body.classList.toggle('light-mode', isLightMode);
            
            // Update theme toggle if it exists
            if (elements.settingsThemeToggle) {
                elements.settingsThemeToggle.checked = isLightMode;
            }
        }

        function saveRegisteredUsers() {
            localStorage.setItem('whider-registered-users', JSON.stringify(registeredUsers));
        }

        function loadRegisteredUsers() {
            const savedRegisteredUsers = localStorage.getItem('whider-registered-users');
            if (savedRegisteredUsers) {
                registeredUsers = JSON.parse(savedRegisteredUsers);
            } else {
                // Add default users
                registeredUsers = [
                    { email: 'admin@whider.com', password: 'admin123' },
                    { email: 'test@example.com', password: 'test123' },
                    { email: 'john@example.com', password: 'john123' },
                    { email: 'whiderr@gmail.com', password: 'whider123' }
                ];
                saveRegisteredUsers();
            }
        }

        function resetAppData() {
            localStorage.removeItem('whider-user');
            localStorage.removeItem('whider-posts');
            localStorage.removeItem('whider-comments');
            localStorage.removeItem('whider-all-users');
            localStorage.removeItem('whider-hashtags');
            localStorage.removeItem('whider-registered-users');
            localStorage.removeItem('whider-communities');
            localStorage.removeItem('whider-community-chats');
            localStorage.removeItem('whider-direct-messages');
            localStorage.removeItem('whider-airdrop-data');
            localStorage.removeItem('whider-referral-data');
            
            // Reload page
            location.reload();
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>